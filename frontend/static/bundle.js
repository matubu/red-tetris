var e={986:(e,t,r)=>{r.d(t,{I:()=>a});var n=r(607);function s(e){let t,r;return{c(){t=(0,n.e)("div"),r=(0,n.t)(e[4]),this.h()},l(s){t=(0,n.c)(s,"DIV",{class:!0});var o=(0,n.a)(t);r=(0,n.h)(o,e[4]),o.forEach(n.d),this.h()},h(){(0,n.b)(t,"class","error")},m(e,s){(0,n.g)(e,t,s),(0,n.G)(t,r)},p(e,t){16&t&&(0,n.j)(r,e[4])},d(e){e&&(0,n.d)(t)}}}function o(e){let t,r,o,i,a,c=e[4]&&s(e);return{c(){t=(0,n.e)("div"),c&&c.c(),r=(0,n.k)(),o=(0,n.e)("input"),this.h()},l(e){t=(0,n.c)(e,"DIV",{});var s=(0,n.a)(t);c&&c.l(s),r=(0,n.m)(s),o=(0,n.c)(s,"INPUT",{class:!0,placeholder:!0,maxlength:!0}),s.forEach(n.d),this.h()},h(){(0,n.b)(o,"class","red-input"),(0,n.b)(o,"placeholder",e[1]),(0,n.b)(o,"maxlength",e[2])},m(s,l){(0,n.g)(s,t,l),c&&c.m(t,null),(0,n.G)(t,r),(0,n.G)(t,o),e[11](o),(0,n.P)(o,e[5]),i||(a=[(0,n.M)(o,"input",e[12]),(0,n.M)(o,"input",e[13])],i=!0)},p(e,[i]){e[4]?c?c.p(e,i):(c=s(e),c.c(),c.m(t,r)):c&&(c.d(1),c=null),2&i&&(0,n.b)(o,"placeholder",e[1]),4&i&&(0,n.b)(o,"maxlength",e[2]),32&i&&o.value!==e[5]&&(0,n.P)(o,e[5])},i:n.E,o:n.E,d(r){r&&(0,n.d)(t),c&&c.d(),e[11](null),i=!1,(0,n.Q)(a)}}}function i(e,t,r){let s,o,{verify:i}=t,{placeholder:a}=t,{maxlength:c}=t,l="";function h(){return l}return e.$$set=e=>{"verify"in e&&r(0,i=e.verify),"placeholder"in e&&r(1,a=e.placeholder),"maxlength"in e&&r(2,c=e.maxlength)},[i,a,c,s,o,l,function(){return r(4,o=i(h())),void 0===o||(s.animate([{transform:"translateX(0px)"},{transform:"translateX(4px)"},{transform:"translateX(-4px)"},{transform:"translateX(2px)"},{transform:"translateX(-2px)"},{transform:"translateX(0px)"}],{duration:400}),!1)},function(e){r(4,o=e)},h,function(e){r(5,l=e)},function(){s.focus()},function(e){n.O[e?"unshift":"push"]((()=>{s=e,r(3,s)}))},async e=>{r(4,o=i(e.target.value))},function(){l=this.value,r(5,l)}]}class a extends n.S{constructor(e){super(),(0,n.i)(this,e,i,o,n.s,{verify:0,placeholder:1,maxlength:2,ok:6,setError:7,getValue:8,setValue:9,focus:10})}get ok(){return this.$$.ctx[6]}get setError(){return this.$$.ctx[7]}get getValue(){return this.$$.ctx[8]}get setValue(){return this.$$.ctx[9]}get focus(){return this.$$.ctx[10]}}},318:(e,t,r)=>{r.d(t,{L:()=>a});var n=r(607),s=r(869),o=r(249);function i(e,t,r){let i,{on:a}=t,{handler:c}=t,l=(0,o.w)();return(0,n.v)((()=>(l.subscribe((e=>{s.s.removeListener(i,c),i=e,s.s.on(i,c)})),()=>{s.s.removeListener(i,c)}))),e.$$set=e=>{"on"in e&&r(0,a=e.on),"handler"in e&&r(1,c=e.handler)},e.$$.update=()=>{1&e.$$.dirty&&l.set(a)},[a,c]}class a extends n.S{constructor(e){super(),(0,n.i)(this,e,i,null,n.s,{on:0,handler:1})}}},607:(e,t,r)=>{function n(){}function s(e,t){for(const r in t)e[r]=t[r];return e}function o(e){return e()}function i(){return Object.create(null)}function a(e){e.forEach(o)}function c(e){return"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let h;function u(e,t){return h||(h=document.createElement("a")),h.href=t,e===h.href}function d(e,t,r){e.$$.on_destroy.push(function(e,...t){if(null==e)return n;const r=e.subscribe(...t);return r.unsubscribe?()=>r.unsubscribe():r}(t,r))}function f(e,t,r,n){if(e){const s=p(e,t,r,n);return e[0](s)}}function p(e,t,r,n){return e[1]&&n?s(r.ctx.slice(),e[1](n(t))):r.ctx}function m(e,t,r,n){if(e[2]&&n){const s=e[2](n(r));if(void 0===t.dirty)return s;if("object"==typeof s){const e=[],r=Math.max(t.dirty.length,s.length);for(let n=0;n<r;n+=1)e[n]=t.dirty[n]|s[n];return e}return t.dirty|s}return t.dirty}function g(e,t,r,n,s,o){if(s){const i=p(t,r,n,o);e.p(i,s)}}function b(e){if(e.ctx.length>32){const t=[],r=e.ctx.length/32;for(let e=0;e<r;e++)t[e]=-1;return t}return-1}r.d(t,{A:()=>he,B:()=>pe,C:()=>s,D:()=>X,E:()=>n,F:()=>f,G:()=>$,H:()=>g,I:()=>b,J:()=>m,K:()=>d,L:()=>_,M:()=>A,N:()=>u,O:()=>F,P:()=>C,Q:()=>a,R:()=>c,S:()=>ge,a:()=>L,b:()=>N,c:()=>B,d:()=>k,e:()=>x,f:()=>P,g:()=>E,h:()=>I,i:()=>me,j:()=>j,k:()=>R,l:()=>O,m:()=>T,n:()=>oe,o:()=>ce,p:()=>ie,q:()=>ae,r:()=>U,s:()=>l,t:()=>G,u:()=>V,v:()=>M,w:()=>ue,x:()=>de,y:()=>fe,z:()=>le});let v,y=!1;function w(e,t,r,n){for(;e<t;){const s=e+(t-e>>1);r(s)<=n?e=s+1:t=s}return e}function $(e,t){if(y){for(function(e){if(e.hydrate_init)return;e.hydrate_init=!0;let t=e.childNodes;if("HEAD"===e.nodeName){const e=[];for(let r=0;r<t.length;r++){const n=t[r];void 0!==n.claim_order&&e.push(n)}t=e}const r=new Int32Array(t.length+1),n=new Int32Array(t.length);r[0]=-1;let s=0;for(let e=0;e<t.length;e++){const o=t[e].claim_order,i=(s>0&&t[r[s]].claim_order<=o?s+1:w(1,s,(e=>t[r[e]].claim_order),o))-1;n[e]=r[i]+1;const a=i+1;r[a]=e,s=Math.max(a,s)}const o=[],i=[];let a=t.length-1;for(let e=r[s]+1;0!=e;e=n[e-1]){for(o.push(t[e-1]);a>=e;a--)i.push(t[a]);a--}for(;a>=0;a--)i.push(t[a]);o.reverse(),i.sort(((e,t)=>e.claim_order-t.claim_order));for(let t=0,r=0;t<i.length;t++){for(;r<o.length&&i[t].claim_order>=o[r].claim_order;)r++;const n=r<o.length?o[r]:null;e.insertBefore(i[t],n)}}(e),(void 0===e.actual_end_child||null!==e.actual_end_child&&e.actual_end_child.parentElement!==e)&&(e.actual_end_child=e.firstChild);null!==e.actual_end_child&&void 0===e.actual_end_child.claim_order;)e.actual_end_child=e.actual_end_child.nextSibling;t!==e.actual_end_child?(void 0!==t.claim_order||t.parentNode!==e)&&e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling}else(t.parentNode!==e||null!==t.nextSibling)&&e.appendChild(t)}function E(e,t,r){y&&!r?$(e,t):(t.parentNode!==e||t.nextSibling!=r)&&e.insertBefore(t,r||null)}function k(e){e.parentNode.removeChild(e)}function _(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function x(e){return document.createElement(e)}function G(e){return document.createTextNode(e)}function R(){return G(" ")}function O(){return G("")}function A(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function N(e,t,r){null==r?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function L(e){return Array.from(e.childNodes)}function S(e,t,r,n,s=!1){!function(e){void 0===e.claim_info&&(e.claim_info={last_index:0,total_claimed:0})}(e);const o=(()=>{for(let n=e.claim_info.last_index;n<e.length;n++){const o=e[n];if(t(o)){const t=r(o);return void 0===t?e.splice(n,1):e[n]=t,s||(e.claim_info.last_index=n),o}}for(let n=e.claim_info.last_index-1;n>=0;n--){const o=e[n];if(t(o)){const t=r(o);return void 0===t?e.splice(n,1):e[n]=t,s?void 0===t&&e.claim_info.last_index--:e.claim_info.last_index=n,o}}return n()})();return o.claim_order=e.claim_info.total_claimed,e.claim_info.total_claimed+=1,o}function B(e,t,r){return function(e,t,r,n){return S(e,(e=>e.nodeName===t),(e=>{const t=[];for(let n=0;n<e.attributes.length;n++){const s=e.attributes[n];r[s.name]||t.push(s.name)}t.forEach((t=>e.removeAttribute(t)))}),(()=>n(t)))}(e,t,r,x)}function I(e,t){return S(e,(e=>3===e.nodeType),(e=>{const r=""+t;if(e.data.startsWith(r)){if(e.data.length!==r.length)return e.splitText(r.length)}else e.data=r}),(()=>G(t)),!0)}function T(e){return I(e," ")}function j(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function C(e,t){e.value=null==t?"":t}function P(e,t,r,n){null===r?e.style.removeProperty(t):e.style.setProperty(t,r,n?"important":"")}function q(e){v=e}function D(){if(!v)throw new Error("Function called outside component initialization");return v}function M(e){D().$$.on_mount.push(e)}function V(e){D().$$.after_update.push(e)}function U(e,t){return D().$$.context.set(e,t),t}const H=[],F=[],z=[],K=[],J=Promise.resolve();let Y=!1;function W(){Y||(Y=!0,J.then(te))}function X(){return W(),J}function Q(e){z.push(e)}const Z=new Set;let ee=0;function te(){const e=v;do{for(;ee<H.length;){const e=H[ee];ee++,q(e),re(e.$$)}for(q(null),H.length=0,ee=0;F.length;)F.pop()();for(let e=0;e<z.length;e+=1){const t=z[e];Z.has(t)||(Z.add(t),t())}z.length=0}while(H.length);for(;K.length;)K.pop()();Y=!1,Z.clear(),q(e)}function re(e){if(null!==e.fragment){e.update(),a(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Q)}}const ne=new Set;let se;function oe(){se={r:0,c:[],p:se}}function ie(){se.r||a(se.c),se=se.p}function ae(e,t){e&&e.i&&(ne.delete(e),e.i(t))}function ce(e,t,r,n){if(e&&e.o){if(ne.has(e))return;ne.add(e),se.c.push((()=>{ne.delete(e),n&&(r&&e.d(1),n())})),e.o(t)}}function le(e,t){const r={},n={},s={$$scope:1};let o=e.length;for(;o--;){const i=e[o],a=t[o];if(a){for(const e in i)e in a||(n[e]=1);for(const e in a)s[e]||(r[e]=a[e],s[e]=1);e[o]=a}else for(const e in i)s[e]=1}for(const e in n)e in r||(r[e]=void 0);return r}function he(e){return"object"==typeof e&&null!==e?e:{}}function ue(e){e&&e.c()}function de(e,t){e&&e.l(t)}function fe(e,t,r,n){const{fragment:s,on_mount:i,on_destroy:l,after_update:h}=e.$$;s&&s.m(t,r),n||Q((()=>{const t=i.map(o).filter(c);l?l.push(...t):a(t),e.$$.on_mount=[]})),h.forEach(Q)}function pe(e,t){const r=e.$$;null!==r.fragment&&(a(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function me(e,t,r,s,o,c,l,h=[-1]){const u=v;q(e);const d=e.$$={fragment:null,ctx:null,props:c,update:n,not_equal:o,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:i(),dirty:h,skip_bound:!1,root:t.target||u.$$.root};l&&l(d.root);let f=!1;if(d.ctx=r?r(e,t.props||{},((t,r,...n)=>{const s=n.length?n[0]:r;return d.ctx&&o(d.ctx[t],d.ctx[t]=s)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](s),f&&function(e,t){-1===e.$$.dirty[0]&&(H.push(e),W(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),r})):[],d.update(),f=!0,a(d.before_update),d.fragment=!!s&&s(d.ctx),t.target){if(t.hydrate){y=!0;const e=L(t.target);d.fragment&&d.fragment.l(e),e.forEach(k)}else d.fragment&&d.fragment.c();t.intro&&ae(e.$$.fragment),fe(e,t.target,t.anchor,t.customElement),y=!1,te()}q(u)}class ge{$destroy(){pe(this,1),this.$destroy=n}$on(e,t){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}},869:(e,t,r)=>{r.d(t,{a:()=>Ee,c:()=>ye,g:()=>$e,s:()=>be,u:()=>ve});var n=r(249);const s=Object.create(null);s.open="0",s.close="1",s.ping="2",s.pong="3",s.message="4",s.upgrade="5",s.noop="6";const o=Object.create(null);Object.keys(s).forEach((e=>{o[s[e]]=e}));const i={type:"error",data:"parser error"},a="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),c="function"==typeof ArrayBuffer,l=({type:e,data:t},r,n)=>a&&t instanceof Blob?r?n(t):h(t,n):c&&(t instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer)(t))?r?n(t):h(new Blob([t]),n):n(s[e]+(t||"")),h=(e,t)=>{const r=new FileReader;return r.onload=function(){const e=r.result.split(",")[1];t("b"+e)},r.readAsDataURL(e)},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<u.length;e++)d[u.charCodeAt(e)]=e;const f="function"==typeof ArrayBuffer,p=(e,t)=>{if("string"!=typeof e)return{type:"message",data:g(e,t)};const r=e.charAt(0);return"b"===r?{type:"message",data:m(e.substring(1),t)}:o[r]?e.length>1?{type:o[r],data:e.substring(1)}:{type:o[r]}:i},m=(e,t)=>{if(f){const r=(e=>{let t,r,n,s,o,i=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);const l=new ArrayBuffer(i),h=new Uint8Array(l);for(t=0;t<a;t+=4)r=d[e.charCodeAt(t)],n=d[e.charCodeAt(t+1)],s=d[e.charCodeAt(t+2)],o=d[e.charCodeAt(t+3)],h[c++]=r<<2|n>>4,h[c++]=(15&n)<<4|s>>2,h[c++]=(3&s)<<6|63&o;return l})(e);return g(r,t)}return{base64:!0,data:e}},g=(e,t)=>"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e,b=String.fromCharCode(30);function v(e){if(e)return function(e){for(var t in v.prototype)e[t]=v.prototype[t];return e}(e)}v.prototype.on=v.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},v.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},v.prototype.off=v.prototype.removeListener=v.prototype.removeAllListeners=v.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var n,s=0;s<r.length;s++)if((n=r[s])===t||n.fn===t){r.splice(s,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},v.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){n=0;for(var s=(r=r.slice(0)).length;n<s;++n)r[n].apply(this,t)}return this},v.prototype.emitReserved=v.prototype.emit,v.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},v.prototype.hasListeners=function(e){return!!this.listeners(e).length};const y="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function w(e,...t){return t.reduce(((t,r)=>(e.hasOwnProperty(r)&&(t[r]=e[r]),t)),{})}const $=setTimeout,E=clearTimeout;function k(e,t){t.useNativeTimers?(e.setTimeoutFn=$.bind(y),e.clearTimeoutFn=E.bind(y)):(e.setTimeoutFn=setTimeout.bind(y),e.clearTimeoutFn=clearTimeout.bind(y))}class _ extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class x extends v{constructor(e){super(),this.writable=!1,k(this,e),this.opts=e,this.query=e.query,this.readyState="",this.socket=e.socket}onError(e,t,r){return super.emitReserved("error",new _(e,t,r)),this}open(){return("closed"===this.readyState||""===this.readyState)&&(this.readyState="opening",this.doOpen()),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=p(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}}const G="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),R={};let O,A=0,N=0;function L(e){let t="";do{t=G[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function S(){const e=L(+new Date);return e!==O?(A=0,O=e):e+"."+L(A++)}for(;N<64;N++)R[G[N]]=N;function B(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}let I=!1;try{I="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch{}const T=I;function j(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||T))return new XMLHttpRequest}catch{}if(!t)try{return new(y[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch{}}function C(){}const P=null!=new j({xdomain:!1}).responseType;class q extends v{constructor(e,t){super(),k(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.create()}create(){const e=w(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const t=this.xhr=new j(e);try{t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let e in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(e)&&t.setRequestHeader(e,this.opts.extraHeaders[e])}}catch{}if("POST"===this.method)try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{t.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),t.onreadystatechange=()=>{4===t.readyState&&(200===t.status||1223===t.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"==typeof t.status?t.status:0)}),0))},t.send(this.data)}catch(e){return void this.setTimeoutFn((()=>{this.onError(e)}),0)}"undefined"!=typeof document&&(this.index=q.requestsCount++,q.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=C,e)try{this.xhr.abort()}catch{}"undefined"!=typeof document&&delete q.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}function D(){for(let e in q.requests)q.requests.hasOwnProperty(e)&&q.requests[e].abort()}q.requestsCount=0,q.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",D):"function"==typeof addEventListener&&addEventListener("onpagehide"in y?"pagehide":"unload",D,!1));const M="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),V=y.WebSocket||y.MozWebSocket,U="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),H={websocket:class extends x{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,r=U?{}:w(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=U?new V(e,t,r):t?new V(e,t):new V(e)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],n=t===e.length-1;l(r,this.supportsBinary,(e=>{try{this.ws.send(e)}catch{}n&&M((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const t=this.opts.secure?"wss":"ws";let r="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(r=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=S()),this.supportsBinary||(e.b64=1);const n=B(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(n.length?"?"+n:"")}check(){return!!V}},polling:class extends x{constructor(e){if(super(e),this.polling=!1,"undefined"!=typeof location){const t="https:"===location.protocol;let r=location.port;r||(r=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||r!==e.port,this.xs=e.secure!==t}const t=e&&e.forceBase64;this.supportsBinary=P&&!t}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let e=0;this.polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const r=e.split(b),n=[];for(let e=0;e<r.length;e++){const s=p(r[e],t);if(n.push(s),"error"===s.type)break}return n})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const r=e.length,n=new Array(r);let s=0;e.forEach(((e,o)=>{l(e,!1,(e=>{n[o]=e,++s===r&&t(n.join(b))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){let e=this.query||{};const t=this.opts.secure?"https":"http";let r="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=S()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(r=":"+this.opts.port);const n=B(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+r+this.opts.path+(n.length?"?"+n:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new q(this.uri(),e)}doWrite(e,t){const r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}},F=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,z=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function K(e){const t=e,r=e.indexOf("["),n=e.indexOf("]");-1!=r&&-1!=n&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let s=F.exec(e||""),o={},i=14;for(;i--;)o[z[i]]=s[i]||"";return-1!=r&&-1!=n&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=function(e,t){const r=t.replace(/\/{2,9}/g,"/").split("/");return("/"==t.substr(0,1)||0===t.length)&&r.splice(0,1),"/"==t.substr(t.length-1,1)&&r.splice(r.length-1,1),r}(0,o.path),o.queryKey=function(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){t&&(r[t]=n)})),r}(0,o.query),o}class J extends v{constructor(e,t={}){super(),e&&"object"==typeof e&&(t=e,e=null),e?(e=K(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=K(t.host).host),k(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},t),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},r=e.split("&");for(let e=0,n=r.length;e<n;e++){let n=r[e].split("=");t[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return t}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",(()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())}),!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const r=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new H[e](r)}open(){let e;if(this.opts.rememberUpgrade&&J.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch{return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(e=>this.onClose("transport close",e)))}probe(e){let t=this.createTransport(e),r=!1;J.priorWebsocketSuccess=!1;const n=()=>{r||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!r)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;J.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{r||"closed"!==this.readyState&&(l(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function s(){r||(r=!0,l(),t.close(),t=null)}const o=e=>{const r=new Error("probe error: "+e);r.transport=t.name,s(),this.emitReserved("upgradeError",r)};function i(){o("transport closed")}function a(){o("socket closed")}function c(e){t&&e.name!==t.name&&s()}const l=()=>{t.removeListener("open",n),t.removeListener("error",o),t.removeListener("close",i),this.off("close",a),this.off("upgrading",c)};t.once("open",n),t.once("error",o),t.once("close",i),this.once("close",a),this.once("upgrading",c),t.open()}onOpen(){if(this.readyState="open",J.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let r=0;r<this.writeBuffer.length;r++){const n=this.writeBuffer[r].data;if(n&&(e+="string"==typeof(t=n)?function(e){let t=0,r=0;for(let n=0,s=e.length;n<s;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}(t):Math.ceil(1.33*(t.byteLength||t.size))),r>0&&e>this.maxPayload)return this.writeBuffer.slice(0,r);e+=2}var t;return this.writeBuffer}write(e,t,r){return this.sendPacket("message",e,t,r),this}send(e,t,r){return this.sendPacket("message",e,t,r),this}sendPacket(e,t,r,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof r&&(n=r,r=null),"closing"===this.readyState||"closed"===this.readyState)return;(r=r||{}).compress=!1!==r.compress;const s={type:e,data:t,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),n&&this.once("flush",n),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?r():e()})):this.upgrading?r():e()),this}onError(e){J.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let r=0;const n=e.length;for(;r<n;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}J.protocol=4;const Y="function"==typeof ArrayBuffer,W=Object.prototype.toString,X="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===W.call(Blob),Q="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===W.call(File);function Z(e){return Y&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||X&&e instanceof Blob||Q&&e instanceof File}function ee(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let t=0,r=e.length;t<r;t++)if(ee(e[t]))return!0;return!1}if(Z(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return ee(e.toJSON(),!0);for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&ee(e[t]))return!0;return!1}function te(e){const t=[],r=e.data,n=e;return n.data=re(r,t),n.attachments=t.length,{packet:n,buffers:t}}function re(e,t){if(!e)return e;if(Z(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=re(e[n],t);return r}if("object"==typeof e&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=re(e[n],t));return r}return e}function ne(e,t){return e.data=se(e.data,t),e.attachments=void 0,e}function se(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=se(e[r],t);else if("object"==typeof e)for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=se(e[r],t));return e}var oe,ie;(ie=oe||(oe={}))[ie.CONNECT=0]="CONNECT",ie[ie.DISCONNECT=1]="DISCONNECT",ie[ie.EVENT=2]="EVENT",ie[ie.ACK=3]="ACK",ie[ie.CONNECT_ERROR=4]="CONNECT_ERROR",ie[ie.BINARY_EVENT=5]="BINARY_EVENT",ie[ie.BINARY_ACK=6]="BINARY_ACK";class ae extends v{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e)t=this.decodeString(e),t.type===oe.BINARY_EVENT||t.type===oe.BINARY_ACK?(this.reconstructor=new ce(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t);else{if(!Z(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const r={type:Number(e.charAt(0))};if(void 0===oe[r.type])throw new Error("unknown packet type "+r.type);if(r.type===oe.BINARY_EVENT||r.type===oe.BINARY_ACK){const n=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const s=e.substring(n,t);if(s!=Number(s)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(s)}if("/"===e.charAt(t+1)){const n=t+1;for(;++t&&","!==e.charAt(t)&&t!==e.length;);r.nsp=e.substring(n,t)}else r.nsp="/";const n=e.charAt(t+1);if(""!==n&&Number(n)==n){const n=t+1;for(;++t;){const r=e.charAt(t);if(null==r||Number(r)!=r){--t;break}if(t===e.length)break}r.id=Number(e.substring(n,t+1))}if(e.charAt(++t)){const n=this.tryParse(e.substr(t));if(!ae.isPayloadValid(r.type,n))throw new Error("invalid payload");r.data=n}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case oe.CONNECT:return"object"==typeof t;case oe.DISCONNECT:return void 0===t;case oe.CONNECT_ERROR:return"string"==typeof t||"object"==typeof t;case oe.EVENT:case oe.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case oe.ACK:case oe.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class ce{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=ne(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var le=Object.freeze(Object.defineProperty({__proto__:null,protocol:5,get PacketType(){return oe},Encoder:class{constructor(e){this.replacer=e}encode(e){return e.type!==oe.EVENT&&e.type!==oe.ACK||!ee(e)?[this.encodeAsString(e)]:(e.type=e.type===oe.EVENT?oe.BINARY_EVENT:oe.BINARY_ACK,this.encodeAsBinary(e))}encodeAsString(e){let t=""+e.type;return(e.type===oe.BINARY_EVENT||e.type===oe.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=te(e),r=this.encodeAsString(t.packet),n=t.buffers;return n.unshift(r),n}},Decoder:ae},Symbol.toStringTag,{value:"Module"}));function he(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const ue=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class de extends v{constructor(e,t,r){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[he(e,"open",this.onopen.bind(this)),he(e,"packet",this.onpacket.bind(this)),he(e,"error",this.onerror.bind(this)),he(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(ue.hasOwnProperty(e))throw new Error('"'+e+'" is a reserved event name');t.unshift(e);const r={type:oe.EVENT,data:t,options:{}};if(r.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++,n=t.pop();this._registerAckCallback(e,n),r.id=e}const n=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!n||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,t){const r=this.flags.timeout;if(void 0===r)return void(this.acks[e]=t);const n=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),r);this.acks[e]=(...e)=>{this.io.clearTimeoutFn(n),t.apply(this,[null,...e])}}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this.packet({type:oe.CONNECT,data:e})})):this.packet({type:oe.CONNECT,data:this.auth})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case oe.CONNECT:if(e.data&&e.data.sid){const t=e.data.sid;this.onconnect(t)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case oe.EVENT:case oe.BINARY_EVENT:this.onevent(e);break;case oe.ACK:case oe.BINARY_ACK:this.onack(e);break;case oe.DISCONNECT:this.ondisconnect();break;case oe.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const r of t)r.apply(this,e)}super.emit.apply(this,e)}ack(e){const t=this;let r=!1;return function(...n){r||(r=!0,t.packet({type:oe.ACK,id:e,data:n}))}}onack(e){const t=this.acks[e.id];"function"==typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}onconnect(e){this.id=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:oe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const r of t)r.apply(this,e.data)}}}function fe(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}fe.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-r:e+r}return 0|Math.min(e,this.max)},fe.prototype.reset=function(){this.attempts=0},fe.prototype.setMin=function(e){this.ms=e},fe.prototype.setMax=function(e){this.max=e},fe.prototype.setJitter=function(e){this.jitter=e};class pe extends v{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,k(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=t.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new fe({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const n=t.parser||le;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new J(this.uri,this.opts);const t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const n=he(t,"open",(function(){r.onopen(),e&&e()})),s=he(t,"error",(t=>{r.cleanup(),r._readyState="closed",this.emitReserved("error",t),e?e(t):r.maybeReconnectOnOpen()}));if(!1!==this._timeout){const e=this._timeout;0===e&&n();const r=this.setTimeoutFn((()=>{n(),t.close(),t.emit("error",new Error("timeout"))}),e);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}return this.subs.push(n),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(he(e,"ping",this.onping.bind(this)),he(e,"data",this.ondata.bind(this)),he(e,"error",this.onerror.bind(this)),he(e,"close",this.onclose.bind(this)),he(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){this.decoder.add(e)}ondecoded(e){this.emitReserved("packet",e)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r||(r=new de(this,e,t),this.nsps[e]=r),r}_destroy(e){const t=Object.keys(this.nsps);for(const e of t)if(this.nsps[e].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const me={};function ge(e,t){"object"==typeof e&&(t=e,e=void 0);const r=function(e,t="",r){let n=e;r=r||"undefined"!=typeof location&&location,null==e&&(e=r.protocol+"//"+r.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==r?r.protocol+"//"+e:"https://"+e),n=K(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const s=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+s+":"+n.port+t,n.href=n.protocol+"://"+s+(r&&r.port===n.port?"":":"+n.port),n}(e,(t=t||{}).path||"/socket.io"),n=r.source,s=r.id,o=r.path,i=me[s]&&o in me[s].nsps;let a;return t.forceNew||t["force new connection"]||!1===t.multiplex||i?a=new pe(n,t):(me[s]||(me[s]=new pe(n,t)),a=me[s]),r.query&&!t.query&&(t.query=r.queryKey),a.socket(r.path,t)}Object.assign(ge,{Manager:pe,Socket:de,io:ge,connect:ge});let be,ve=(0,n.w)(),ye=(0,n.w)(!0);var we;ve.set(null!=(we=localStorage.getItem("user"))?we:""),ve.subscribe((e=>{localStorage.setItem("user",e)})),be=ge(`http://${location.hostname}:4000`),be.on("connect",(()=>ye.set(!0))),be.on("connect_error",(()=>ye.set(!1))),be.on("disconnect",(()=>ye.set(!1))),n.c.disable_scroll_handling;const $e=n.c.goto;n.c.invalidate,n.c.prefetch,n.c.prefetch_routes,n.c.before_navigate;const Ee=n.c.after_navigate},249:(e,t,r)=>{r.d(t,{c:()=>i,i:()=>a,w:()=>o});var n=r(607);const s=[];function o(e,t=n.E){let r;const o=new Set;function i(t){if((0,n.s)(e,t)&&(e=t,r)){const t=!s.length;for(const t of o)t[1](),s.push(t,e);if(t){for(let e=0;e<s.length;e+=2)s[e][0](s[e+1]);s.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(s,a=n.E){const c=[s,a];return o.add(c),1===o.size&&(r=t(i)||n.E),s(e),()=>{o.delete(c),0===o.size&&(r(),r=null)}}}}let i;function a(e){i=e.client}},50:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l,load:()=>a});var n=r(607);function s(e){let t,r,s=e[1].frame+"";return{c(){t=(0,n.e)("pre"),r=(0,n.t)(s)},l(e){t=(0,n.c)(e,"PRE",{});var o=(0,n.a)(t);r=(0,n.h)(o,s),o.forEach(n.d)},m(e,s){(0,n.g)(e,t,s),(0,n.G)(t,r)},p(e,t){2&t&&s!==(s=e[1].frame+"")&&(0,n.j)(r,s)},d(e){e&&(0,n.d)(t)}}}function o(e){let t,r,s=e[1].stack+"";return{c(){t=(0,n.e)("pre"),r=(0,n.t)(s)},l(e){t=(0,n.c)(e,"PRE",{});var o=(0,n.a)(t);r=(0,n.h)(o,s),o.forEach(n.d)},m(e,s){(0,n.g)(e,t,s),(0,n.G)(t,r)},p(e,t){2&t&&s!==(s=e[1].stack+"")&&(0,n.j)(r,s)},d(e){e&&(0,n.d)(t)}}}function i(e){let t,r,i,a,c,l,h,u,d=e[1].message+"",f=e[1].frame&&s(e),p=e[1].stack&&o(e);return{c(){t=(0,n.e)("h1"),r=(0,n.t)(e[0]),i=(0,n.k)(),a=(0,n.e)("pre"),c=(0,n.t)(d),l=(0,n.k)(),f&&f.c(),h=(0,n.k)(),p&&p.c(),u=(0,n.l)()},l(s){t=(0,n.c)(s,"H1",{});var o=(0,n.a)(t);r=(0,n.h)(o,e[0]),o.forEach(n.d),i=(0,n.m)(s),a=(0,n.c)(s,"PRE",{});var m=(0,n.a)(a);c=(0,n.h)(m,d),m.forEach(n.d),l=(0,n.m)(s),f&&f.l(s),h=(0,n.m)(s),p&&p.l(s),u=(0,n.l)()},m(e,s){(0,n.g)(e,t,s),(0,n.G)(t,r),(0,n.g)(e,i,s),(0,n.g)(e,a,s),(0,n.G)(a,c),(0,n.g)(e,l,s),f&&f.m(e,s),(0,n.g)(e,h,s),p&&p.m(e,s),(0,n.g)(e,u,s)},p(e,[t]){1&t&&(0,n.j)(r,e[0]),2&t&&d!==(d=e[1].message+"")&&(0,n.j)(c,d),e[1].frame?f?f.p(e,t):(f=s(e),f.c(),f.m(h.parentNode,h)):f&&(f.d(1),f=null),e[1].stack?p?p.p(e,t):(p=o(e),p.c(),p.m(u.parentNode,u)):p&&(p.d(1),p=null)},i:n.E,o:n.E,d(e){e&&(0,n.d)(t),e&&(0,n.d)(i),e&&(0,n.d)(a),e&&(0,n.d)(l),f&&f.d(e),e&&(0,n.d)(h),p&&p.d(e),e&&(0,n.d)(u)}}}function a({error:e,status:t}){return{props:{error:e,status:t}}}function c(e,t,r){let{status:n}=t,{error:s}=t;return e.$$set=e=>{"status"in e&&r(0,n=e.status),"error"in e&&r(1,s=e.error)},[n,s]}class l extends n.S{constructor(e){super(),(0,n.i)(this,e,c,i,n.s,{status:0,error:1})}}},655:(e,t,r)=>{r.r(t),r.d(t,{default:()=>c});var n=r(607),s=r(869);function o(e){let t,r;return{c(){t=(0,n.e)("div"),r=(0,n.t)("DISCONNECTED"),this.h()},l(e){t=(0,n.c)(e,"DIV",{class:!0});var s=(0,n.a)(t);r=(0,n.h)(s,"DISCONNECTED"),s.forEach(n.d),this.h()},h(){(0,n.b)(t,"class","disconnected svelte-1yow2pd")},m(e,s){(0,n.g)(e,t,s),(0,n.G)(t,r)},d(e){e&&(0,n.d)(t)}}}function i(e){let t,r,s;const i=e[2].default,a=(0,n.F)(i,e,e[1],null);let c=!e[0]&&o();return{c(){a&&a.c(),t=(0,n.k)(),c&&c.c(),r=(0,n.l)()},l(e){a&&a.l(e),t=(0,n.m)(e),c&&c.l(e),r=(0,n.l)()},m(e,o){a&&a.m(e,o),(0,n.g)(e,t,o),c&&c.m(e,o),(0,n.g)(e,r,o),s=!0},p(e,[t]){a&&a.p&&(!s||2&t)&&(0,n.H)(a,i,e,e[1],s?(0,n.J)(i,e[1],t,null):(0,n.I)(e[1]),null),e[0]?c&&(c.d(1),c=null):c||(c=o(),c.c(),c.m(r.parentNode,r))},i(e){s||((0,n.q)(a,e),s=!0)},o(e){(0,n.o)(a,e),s=!1},d(e){a&&a.d(e),e&&(0,n.d)(t),c&&c.d(e),e&&(0,n.d)(r)}}}function a(e,t,r){let o,i;(0,n.K)(e,s.u,(e=>r(3,o=e))),(0,n.K)(e,s.c,(e=>r(0,i=e)));let{$$slots:a={},$$scope:c}=t;{let e=function(){"/"!==location.pathname&&(void 0===o||""===o)&&(0,s.g)("/")};(0,s.a)(e),s.u.subscribe(e)}return e.$$set=e=>{"$$scope"in e&&r(1,c=e.$$scope)},[i,c,a]}r(249);class c extends n.S{constructor(e){super(),(0,n.i)(this,e,a,i,n.s,{})}}},545:(e,t,r)=>{r.r(t),r.d(t,{default:()=>B});var n=r(607),s=r(869),o=r(318),i=(r(249),Object.defineProperty),a=Object.defineProperties,c=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,d=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function f(e,t,r){const n=e.slice();return n[22]=t[r],n[24]=r,n}function p(e,t,r){const n=e.slice();return n[25]=t[r],n}function m(e,t,r){const n=e.slice();return n[28]=t[r],n}function g(e,t,r){const n=e.slice();return n[25]=t[r],n}function b(e,t,r){const n=e.slice();return n[28]=t[r],n}function v(e,t,r){const n=e.slice();return n[35]=t[r][0],n[36]=t[r][1].username,n[37]=t[r][1].heights,n[38]=t[r][1].scores,n[11]=t[r][1].gameover,n}function y(e,t,r){const n=e.slice();return n[41]=t[r],n}function w(e){let t;return{c(){t=(0,n.e)("div"),this.h()},l(e){t=(0,n.c)(e,"DIV",{style:!0,class:!0}),(0,n.a)(t).forEach(n.d),this.h()},h(){(0,n.f)(t,"height",e[41]/20*100+"%"),(0,n.b)(t,"class","svelte-motlbc")},m(e,r){(0,n.g)(e,t,r)},p(e,r){2&r[0]&&(0,n.f)(t,"height",e[41]/20*100+"%")},d(e){e&&(0,n.d)(t)}}}function $(e){let t,r,s,o,i,a,c,l,h,u=e[36]+"",d=e[38].score+"",f=e[37],p=[];for(let t=0;t<f.length;t+=1)p[t]=w(y(e,f,t));return{c(){t=(0,n.e)("div"),r=(0,n.t)(u),s=(0,n.e)("br"),o=(0,n.k)(),i=(0,n.t)(d),a=(0,n.k)(),c=(0,n.e)("div");for(let e=0;e<p.length;e+=1)p[e].c();h=(0,n.k)(),this.h()},l(e){t=(0,n.c)(e,"DIV",{class:!0});var l=(0,n.a)(t);r=(0,n.h)(l,u),s=(0,n.c)(l,"BR",{}),o=(0,n.m)(l),i=(0,n.h)(l,d),a=(0,n.m)(l),c=(0,n.c)(l,"DIV",{class:!0});var f=(0,n.a)(c);for(let e=0;e<p.length;e+=1)p[e].l(f);f.forEach(n.d),h=(0,n.m)(l),l.forEach(n.d),this.h()},h(){(0,n.b)(c,"class",l="small-board "+(e[11]?"small-gameover":"")+" svelte-motlbc"),(0,n.b)(t,"class","svelte-motlbc")},m(e,l){(0,n.g)(e,t,l),(0,n.G)(t,r),(0,n.G)(t,s),(0,n.G)(t,o),(0,n.G)(t,i),(0,n.G)(t,a),(0,n.G)(t,c);for(let e=0;e<p.length;e+=1)p[e].m(c,null);(0,n.G)(t,h)},p(e,t){if(2&t[0]&&u!==(u=e[36]+"")&&(0,n.j)(r,u),2&t[0]&&d!==(d=e[38].score+"")&&(0,n.j)(i,d),2&t[0]){let r;for(f=e[37],r=0;r<f.length;r+=1){const n=y(e,f,r);p[r]?p[r].p(n,t):(p[r]=w(n),p[r].c(),p[r].m(c,null))}for(;r<p.length;r+=1)p[r].d(1);p.length=f.length}2&t[0]&&l!==(l="small-board "+(e[11]?"small-gameover":"")+" svelte-motlbc")&&(0,n.b)(c,"class",l)},d(e){e&&(0,n.d)(t),(0,n.L)(p,e)}}}function E(e){let t,r,s,o,i,a,c,l,h;return{c(){t=(0,n.e)("div"),r=(0,n.e)("h2"),s=(0,n.t)("GAMEOVER"),o=(0,n.k)(),i=(0,n.e)("div"),a=(0,n.t)("SCORE"),c=(0,n.e)("br"),l=(0,n.k)(),h=(0,n.t)(e[3]),this.h()},l(u){t=(0,n.c)(u,"DIV",{class:!0});var d=(0,n.a)(t);r=(0,n.c)(d,"H2",{});var f=(0,n.a)(r);s=(0,n.h)(f,"GAMEOVER"),f.forEach(n.d),o=(0,n.m)(d),i=(0,n.c)(d,"DIV",{class:!0});var p=(0,n.a)(i);a=(0,n.h)(p,"SCORE"),c=(0,n.c)(p,"BR",{}),l=(0,n.m)(p),h=(0,n.h)(p,e[3]),p.forEach(n.d),d.forEach(n.d),this.h()},h(){(0,n.b)(i,"class","gameover-score svelte-motlbc"),(0,n.b)(t,"class","gameover svelte-motlbc")},m(e,u){(0,n.g)(e,t,u),(0,n.G)(t,r),(0,n.G)(r,s),(0,n.G)(t,o),(0,n.G)(t,i),(0,n.G)(i,a),(0,n.G)(i,c),(0,n.G)(i,l),(0,n.G)(i,h)},p(e,t){8&t[0]&&(0,n.j)(h,e[3])},d(e){e&&(0,n.d)(t)}}}function k(e){let t,r;return{c(){t=(0,n.e)("div"),this.h()},l(e){t=(0,n.c)(e,"DIV",{class:!0}),(0,n.a)(t).forEach(n.d),this.h()},h(){(0,n.b)(t,"class",r="cell cell-"+e[28]+" svelte-motlbc")},m(e,r){(0,n.g)(e,t,r)},p(e,s){4&s[0]&&r!==(r="cell cell-"+e[28]+" svelte-motlbc")&&(0,n.b)(t,"class",r)},d(e){e&&(0,n.d)(t)}}}function _(e){let t,r,s=e[25],o=[];for(let t=0;t<s.length;t+=1)o[t]=k(b(e,s,t));return{c(){t=(0,n.e)("div");for(let e=0;e<o.length;e+=1)o[e].c();r=(0,n.k)(),this.h()},l(e){t=(0,n.c)(e,"DIV",{class:!0});var s=(0,n.a)(t);for(let e=0;e<o.length;e+=1)o[e].l(s);r=(0,n.m)(s),s.forEach(n.d),this.h()},h(){(0,n.b)(t,"class","row svelte-motlbc")},m(e,s){(0,n.g)(e,t,s);for(let e=0;e<o.length;e+=1)o[e].m(t,null);(0,n.G)(t,r)},p(e,n){if(4&n[0]){let i;for(s=e[25],i=0;i<s.length;i+=1){const a=b(e,s,i);o[i]?o[i].p(a,n):(o[i]=k(a),o[i].c(),o[i].m(t,r))}for(;i<o.length;i+=1)o[i].d(1);o.length=s.length}},d(e){e&&(0,n.d)(t),(0,n.L)(o,e)}}}function x(e){let t,r;return{c(){t=(0,n.e)("div"),this.h()},l(e){t=(0,n.c)(e,"DIV",{class:!0}),(0,n.a)(t).forEach(n.d),this.h()},h(){(0,n.b)(t,"class",r="cell cell-"+(e[28]?e[7].colorid:0)+" svelte-motlbc")},m(e,r){(0,n.g)(e,t,r)},p(e,s){128&s[0]&&r!==(r="cell cell-"+(e[28]?e[7].colorid:0)+" svelte-motlbc")&&(0,n.b)(t,"class",r)},d(e){e&&(0,n.d)(t)}}}function G(e){let t,r,s=e[25],o=[];for(let t=0;t<s.length;t+=1)o[t]=x(m(e,s,t));return{c(){t=(0,n.e)("div");for(let e=0;e<o.length;e+=1)o[e].c();r=(0,n.k)(),this.h()},l(e){t=(0,n.c)(e,"DIV",{class:!0});var s=(0,n.a)(t);for(let e=0;e<o.length;e+=1)o[e].l(s);r=(0,n.m)(s),s.forEach(n.d),this.h()},h(){(0,n.b)(t,"class","row svelte-motlbc")},m(e,s){(0,n.g)(e,t,s);for(let e=0;e<o.length;e+=1)o[e].m(t,null);(0,n.G)(t,r)},p(e,n){if(128&n[0]){let i;for(s=e[25],i=0;i<s.length;i+=1){const a=m(e,s,i);o[i]?o[i].p(a,n):(o[i]=x(a),o[i].c(),o[i].m(t,r))}for(;i<o.length;i+=1)o[i].d(1);o.length=s.length}},d(e){e&&(0,n.d)(t),(0,n.L)(o,e)}}}function R(e){let t,r,s,o;return{c(){t=(0,n.e)("button"),r=(0,n.t)("LEAVE"),this.h()},l(e){t=(0,n.c)(e,"BUTTON",{class:!0});var s=(0,n.a)(t);r=(0,n.h)(s,"LEAVE"),s.forEach(n.d),this.h()},h(){(0,n.b)(t,"class","red-button")},m(i,a){(0,n.g)(i,t,a),(0,n.G)(t,r),s||(o=(0,n.M)(t,"click",e[19]),s=!0)},p:n.E,d(e){e&&(0,n.d)(t),s=!1,o()}}}function O(e){let t,r,s,o,i,a,c,l,h,u,d,p,m,g,b,v,y,w,$,E,k,_=e[8],x=[];for(let t=0;t<_.length;t+=1)x[t]=A(f(e,_,t));let G=e[5]&&N(e);return{c(){t=(0,n.e)("div"),r=(0,n.e)("h2"),s=(0,n.t)("Scores"),o=(0,n.k)(),i=(0,n.e)("div"),a=(0,n.e)("p"),c=(0,n.t)("Top"),l=(0,n.k)(),h=(0,n.e)("p"),u=(0,n.t)("Name"),d=(0,n.k)(),p=(0,n.e)("p"),m=(0,n.t)("score"),g=(0,n.k)();for(let e=0;e<x.length;e+=1)x[e].c();b=(0,n.k)(),v=(0,n.e)("div"),y=(0,n.e)("button"),w=(0,n.t)("LEAVE"),$=(0,n.k)(),G&&G.c(),this.h()},l(e){t=(0,n.c)(e,"DIV",{class:!0});var f=(0,n.a)(t);r=(0,n.c)(f,"H2",{});var E=(0,n.a)(r);s=(0,n.h)(E,"Scores"),E.forEach(n.d),o=(0,n.m)(f),i=(0,n.c)(f,"DIV",{class:!0});var k=(0,n.a)(i);a=(0,n.c)(k,"P",{});var _=(0,n.a)(a);c=(0,n.h)(_,"Top"),_.forEach(n.d),l=(0,n.m)(k),h=(0,n.c)(k,"P",{});var R=(0,n.a)(h);u=(0,n.h)(R,"Name"),R.forEach(n.d),d=(0,n.m)(k),p=(0,n.c)(k,"P",{});var O=(0,n.a)(p);m=(0,n.h)(O,"score"),O.forEach(n.d),k.forEach(n.d),g=(0,n.m)(f);for(let e=0;e<x.length;e+=1)x[e].l(f);b=(0,n.m)(f),v=(0,n.c)(f,"DIV",{class:!0});var A=(0,n.a)(v);y=(0,n.c)(A,"BUTTON",{class:!0});var N=(0,n.a)(y);w=(0,n.h)(N,"LEAVE"),N.forEach(n.d),$=(0,n.m)(A),G&&G.l(A),A.forEach(n.d),f.forEach(n.d),this.h()},h(){(0,n.b)(i,"class","score-div svelte-motlbc"),(0,n.b)(y,"class","red-button"),(0,n.b)(v,"class","action"),(0,n.b)(t,"class","card card-endgame svelte-motlbc")},m(f,_){(0,n.g)(f,t,_),(0,n.G)(t,r),(0,n.G)(r,s),(0,n.G)(t,o),(0,n.G)(t,i),(0,n.G)(i,a),(0,n.G)(a,c),(0,n.G)(i,l),(0,n.G)(i,h),(0,n.G)(h,u),(0,n.G)(i,d),(0,n.G)(i,p),(0,n.G)(p,m),(0,n.G)(t,g);for(let e=0;e<x.length;e+=1)x[e].m(t,null);(0,n.G)(t,b),(0,n.G)(t,v),(0,n.G)(v,y),(0,n.G)(y,w),(0,n.G)(v,$),G&&G.m(v,null),E||(k=(0,n.M)(y,"click",e[20]),E=!0)},p(e,r){if(256&r[0]){let n;for(_=e[8],n=0;n<_.length;n+=1){const s=f(e,_,n);x[n]?x[n].p(s,r):(x[n]=A(s),x[n].c(),x[n].m(t,b))}for(;n<x.length;n+=1)x[n].d(1);x.length=_.length}e[5]?G?G.p(e,r):(G=N(e),G.c(),G.m(v,null)):G&&(G.d(1),G=null)},d(e){e&&(0,n.d)(t),(0,n.L)(x,e),G&&G.d(),E=!1,k()}}}function A(e){let t,r,s,o,i,a,c,l,h,u,d,f=e[24]+1+"",p=e[22].username+"",m=e[22].score+"";return{c(){t=(0,n.e)("div"),r=(0,n.e)("p"),s=(0,n.t)(f),o=(0,n.k)(),i=(0,n.e)("p"),a=(0,n.t)(p),c=(0,n.k)(),l=(0,n.e)("p"),h=(0,n.t)(m),u=(0,n.k)(),d=(0,n.e)("hr"),this.h()},l(e){t=(0,n.c)(e,"DIV",{class:!0});var g=(0,n.a)(t);r=(0,n.c)(g,"P",{});var b=(0,n.a)(r);s=(0,n.h)(b,f),b.forEach(n.d),o=(0,n.m)(g),i=(0,n.c)(g,"P",{});var v=(0,n.a)(i);a=(0,n.h)(v,p),v.forEach(n.d),c=(0,n.m)(g),l=(0,n.c)(g,"P",{});var y=(0,n.a)(l);h=(0,n.h)(y,m),y.forEach(n.d),g.forEach(n.d),u=(0,n.m)(e),d=(0,n.c)(e,"HR",{}),this.h()},h(){(0,n.b)(t,"class","score-div svelte-motlbc")},m(e,f){(0,n.g)(e,t,f),(0,n.G)(t,r),(0,n.G)(r,s),(0,n.G)(t,o),(0,n.G)(t,i),(0,n.G)(i,a),(0,n.G)(t,c),(0,n.G)(t,l),(0,n.G)(l,h),(0,n.g)(e,u,f),(0,n.g)(e,d,f)},p(e,t){256&t[0]&&p!==(p=e[22].username+"")&&(0,n.j)(a,p),256&t[0]&&m!==(m=e[22].score+"")&&(0,n.j)(h,m)},d(e){e&&(0,n.d)(t),e&&(0,n.d)(u),e&&(0,n.d)(d)}}}function N(e){let t,r,s,o;return{c(){t=(0,n.e)("button"),r=(0,n.t)("RESTART"),this.h()},l(e){t=(0,n.c)(e,"BUTTON",{class:!0});var s=(0,n.a)(t);r=(0,n.h)(s,"RESTART"),s.forEach(n.d),this.h()},h(){(0,n.b)(t,"class","red-button")},m(i,a){(0,n.g)(i,t,a),(0,n.G)(t,r),s||(o=(0,n.M)(t,"click",e[21]),s=!0)},p:n.E,d(e){e&&(0,n.d)(t),s=!1,o()}}}function L(e){let t,r,s,i,a,c,l,h,u,d,f,m,b,y,w,k,x,A,N,L,S,B,I,T,j,C,P,q,D,M,V,U,H,F,z,K,J,Y,W,X,Q,Z,ee,te,re,ne,se,oe,ie,ae,ce,le,he,ue,de;t=new o.L({props:{on:"notauthorized:"+e[0],handler:e[15]}}),s=new o.L({props:{on:"owner:"+e[0],handler:e[16]}}),a=new o.L({props:{on:"connect",handler:e[12]}}),l=new o.L({props:{on:"endgame:"+e[0],handler:e[13]}}),u=new o.L({props:{on:"restart:"+e[0],handler:e[17]}}),f=new o.L({props:{on:"gameInfo:"+e[0],handler:e[18]}});let fe=[...e[1].entries()],pe=[];for(let t=0;t<fe.length;t+=1)pe[t]=$(v(e,fe,t));let me=e[11]&&E(e),ge=e[2],be=[];for(let t=0;t<ge.length;t+=1)be[t]=_(g(e,ge,t));let ve=e[7].shape,ye=[];for(let t=0;t<ve.length;t+=1)ye[t]=G(p(e,ve,t));let we=!e[9]&&R(e),$e=e[9]&&O(e);return{c(){(0,n.w)(t.$$.fragment),r=(0,n.k)(),(0,n.w)(s.$$.fragment),i=(0,n.k)(),(0,n.w)(a.$$.fragment),c=(0,n.k)(),(0,n.w)(l.$$.fragment),h=(0,n.k)(),(0,n.w)(u.$$.fragment),d=(0,n.k)(),(0,n.w)(f.$$.fragment),m=(0,n.k)(),b=(0,n.e)("main"),y=(0,n.e)("aside");for(let e=0;e<pe.length;e+=1)pe[e].c();w=(0,n.k)(),k=(0,n.e)("div"),me&&me.c(),x=(0,n.k)(),A=(0,n.e)("div");for(let e=0;e<be.length;e+=1)be[e].c();N=(0,n.k)(),L=(0,n.e)("aside"),S=(0,n.e)("h1"),B=(0,n.t)(e[0]),I=(0,n.k)(),T=(0,n.e)("h2"),j=(0,n.t)(e[10]),C=(0,n.k)(),P=(0,n.e)("div"),q=(0,n.t)("HIGH SCORE"),D=(0,n.e)("br"),M=(0,n.t)("\n\t\t\t0"),V=(0,n.e)("br"),U=(0,n.t)("\n\t\t\tSCORE"),H=(0,n.e)("br"),F=(0,n.k)(),z=(0,n.t)(e[3]),K=(0,n.e)("br"),J=(0,n.t)("\n\t\t\tLINES"),Y=(0,n.e)("br"),W=(0,n.k)(),X=(0,n.t)(e[4]),Q=(0,n.e)("br"),Z=(0,n.t)("\n\t\t\tINCOMING LINES"),ee=(0,n.e)("br"),te=(0,n.k)(),re=(0,n.t)(e[6]),ne=(0,n.e)("br"),se=(0,n.k)(),oe=(0,n.e)("br"),ie=(0,n.k)(),ae=(0,n.e)("div");for(let e=0;e<ye.length;e+=1)ye[e].c();ce=(0,n.k)(),we&&we.c(),le=(0,n.k)(),$e&&$e.c(),this.h()},l(o){(0,n.x)(t.$$.fragment,o),r=(0,n.m)(o),(0,n.x)(s.$$.fragment,o),i=(0,n.m)(o),(0,n.x)(a.$$.fragment,o),c=(0,n.m)(o),(0,n.x)(l.$$.fragment,o),h=(0,n.m)(o),(0,n.x)(u.$$.fragment,o),d=(0,n.m)(o),(0,n.x)(f.$$.fragment,o),m=(0,n.m)(o),b=(0,n.c)(o,"MAIN",{class:!0});var p=(0,n.a)(b);y=(0,n.c)(p,"ASIDE",{class:!0});var g=(0,n.a)(y);for(let e=0;e<pe.length;e+=1)pe[e].l(g);g.forEach(n.d),w=(0,n.m)(p),k=(0,n.c)(p,"DIV",{class:!0});var v=(0,n.a)(k);me&&me.l(v),x=(0,n.m)(v),A=(0,n.c)(v,"DIV",{class:!0});var $=(0,n.a)(A);for(let e=0;e<be.length;e+=1)be[e].l($);$.forEach(n.d),v.forEach(n.d),N=(0,n.m)(p),L=(0,n.c)(p,"ASIDE",{class:!0});var E=(0,n.a)(L);S=(0,n.c)(E,"H1",{});var _=(0,n.a)(S);B=(0,n.h)(_,e[0]),_.forEach(n.d),I=(0,n.m)(E),T=(0,n.c)(E,"H2",{});var G=(0,n.a)(T);j=(0,n.h)(G,e[10]),G.forEach(n.d),C=(0,n.m)(E),P=(0,n.c)(E,"DIV",{});var R=(0,n.a)(P);q=(0,n.h)(R,"HIGH SCORE"),D=(0,n.c)(R,"BR",{}),M=(0,n.h)(R,"\n\t\t\t0"),V=(0,n.c)(R,"BR",{}),U=(0,n.h)(R,"\n\t\t\tSCORE"),H=(0,n.c)(R,"BR",{}),F=(0,n.m)(R),z=(0,n.h)(R,e[3]),K=(0,n.c)(R,"BR",{}),J=(0,n.h)(R,"\n\t\t\tLINES"),Y=(0,n.c)(R,"BR",{}),W=(0,n.m)(R),X=(0,n.h)(R,e[4]),Q=(0,n.c)(R,"BR",{}),Z=(0,n.h)(R,"\n\t\t\tINCOMING LINES"),ee=(0,n.c)(R,"BR",{}),te=(0,n.m)(R),re=(0,n.h)(R,e[6]),ne=(0,n.c)(R,"BR",{}),se=(0,n.m)(R),oe=(0,n.c)(R,"BR",{}),ie=(0,n.m)(R),ae=(0,n.c)(R,"DIV",{class:!0});var O=(0,n.a)(ae);for(let e=0;e<ye.length;e+=1)ye[e].l(O);O.forEach(n.d),R.forEach(n.d),ce=(0,n.m)(E),we&&we.l(E),E.forEach(n.d),le=(0,n.m)(p),$e&&$e.l(p),p.forEach(n.d),this.h()},h(){(0,n.b)(y,"class","others svelte-motlbc"),(0,n.b)(A,"class","board svelte-motlbc"),(0,n.b)(k,"class","container svelte-motlbc"),(0,n.b)(ae,"class","board next-piece svelte-motlbc"),(0,n.b)(L,"class","self svelte-motlbc"),(0,n.b)(b,"class","svelte-motlbc")},m(o,p){(0,n.y)(t,o,p),(0,n.g)(o,r,p),(0,n.y)(s,o,p),(0,n.g)(o,i,p),(0,n.y)(a,o,p),(0,n.g)(o,c,p),(0,n.y)(l,o,p),(0,n.g)(o,h,p),(0,n.y)(u,o,p),(0,n.g)(o,d,p),(0,n.y)(f,o,p),(0,n.g)(o,m,p),(0,n.g)(o,b,p),(0,n.G)(b,y);for(let e=0;e<pe.length;e+=1)pe[e].m(y,null);(0,n.G)(b,w),(0,n.G)(b,k),me&&me.m(k,null),(0,n.G)(k,x),(0,n.G)(k,A);for(let e=0;e<be.length;e+=1)be[e].m(A,null);(0,n.G)(b,N),(0,n.G)(b,L),(0,n.G)(L,S),(0,n.G)(S,B),(0,n.G)(L,I),(0,n.G)(L,T),(0,n.G)(T,j),(0,n.G)(L,C),(0,n.G)(L,P),(0,n.G)(P,q),(0,n.G)(P,D),(0,n.G)(P,M),(0,n.G)(P,V),(0,n.G)(P,U),(0,n.G)(P,H),(0,n.G)(P,F),(0,n.G)(P,z),(0,n.G)(P,K),(0,n.G)(P,J),(0,n.G)(P,Y),(0,n.G)(P,W),(0,n.G)(P,X),(0,n.G)(P,Q),(0,n.G)(P,Z),(0,n.G)(P,ee),(0,n.G)(P,te),(0,n.G)(P,re),(0,n.G)(P,ne),(0,n.G)(P,se),(0,n.G)(P,oe),(0,n.G)(P,ie),(0,n.G)(P,ae);for(let e=0;e<ye.length;e+=1)ye[e].m(ae,null);(0,n.G)(L,ce),we&&we.m(L,null),(0,n.G)(b,le),$e&&$e.m(b,null),he=!0,ue||(de=(0,n.M)(window,"keydown",e[14]),ue=!0)},p(e,r){const o={};1&r[0]&&(o.on="notauthorized:"+e[0]),t.$set(o);const i={};1&r[0]&&(i.on="owner:"+e[0]),32&r[0]&&(i.handler=e[16]),s.$set(i);const a={};1&r[0]&&(a.on="endgame:"+e[0]),l.$set(a);const c={};1&r[0]&&(c.on="restart:"+e[0]),1&r[0]&&(c.handler=e[17]),u.$set(c);const h={};if(1&r[0]&&(h.on="gameInfo:"+e[0]),2270&r[0]&&(h.handler=e[18]),f.$set(h),2&r[0]){let t;for(fe=[...e[1].entries()],t=0;t<fe.length;t+=1){const n=v(e,fe,t);pe[t]?pe[t].p(n,r):(pe[t]=$(n),pe[t].c(),pe[t].m(y,null))}for(;t<pe.length;t+=1)pe[t].d(1);pe.length=fe.length}if(e[11]?me?me.p(e,r):(me=E(e),me.c(),me.m(k,x)):me&&(me.d(1),me=null),4&r[0]){let t;for(ge=e[2],t=0;t<ge.length;t+=1){const n=g(e,ge,t);be[t]?be[t].p(n,r):(be[t]=_(n),be[t].c(),be[t].m(A,null))}for(;t<be.length;t+=1)be[t].d(1);be.length=ge.length}if((!he||1&r[0])&&(0,n.j)(B,e[0]),(!he||1024&r[0])&&(0,n.j)(j,e[10]),(!he||8&r[0])&&(0,n.j)(z,e[3]),(!he||16&r[0])&&(0,n.j)(X,e[4]),(!he||64&r[0])&&(0,n.j)(re,e[6]),128&r[0]){let t;for(ve=e[7].shape,t=0;t<ve.length;t+=1){const n=p(e,ve,t);ye[t]?ye[t].p(n,r):(ye[t]=G(n),ye[t].c(),ye[t].m(ae,null))}for(;t<ye.length;t+=1)ye[t].d(1);ye.length=ve.length}e[9]?we&&(we.d(1),we=null):we?we.p(e,r):(we=R(e),we.c(),we.m(L,null)),e[9]?$e?$e.p(e,r):($e=O(e),$e.c(),$e.m(b,null)):$e&&($e.d(1),$e=null)},i(e){he||((0,n.q)(t.$$.fragment,e),(0,n.q)(s.$$.fragment,e),(0,n.q)(a.$$.fragment,e),(0,n.q)(l.$$.fragment,e),(0,n.q)(u.$$.fragment,e),(0,n.q)(f.$$.fragment,e),he=!0)},o(e){(0,n.o)(t.$$.fragment,e),(0,n.o)(s.$$.fragment,e),(0,n.o)(a.$$.fragment,e),(0,n.o)(l.$$.fragment,e),(0,n.o)(u.$$.fragment,e),(0,n.o)(f.$$.fragment,e),he=!1},d(e){(0,n.B)(t,e),e&&(0,n.d)(r),(0,n.B)(s,e),e&&(0,n.d)(i),(0,n.B)(a,e),e&&(0,n.d)(c),(0,n.B)(l,e),e&&(0,n.d)(h),(0,n.B)(u,e),e&&(0,n.d)(d),(0,n.B)(f,e),e&&(0,n.d)(m),e&&(0,n.d)(b),(0,n.L)(pe,e),me&&me.d(),(0,n.L)(be,e),(0,n.L)(ye,e),we&&we.d(),$e&&$e.d(),ue=!1,de()}}}function S(e,t,r){let o;(0,n.K)(e,s.u,(e=>r(10,o=e)));let i="",f=new Map,p=!1,m=new Array(20).fill().map((()=>new Array(10).fill(0))),g=0,b=0,v=!1,y=0,w={shape:[]},$=[],E=!1;function k(){s.s.emit("initgame",i)}return(0,n.v)((()=>{r(0,i=location.hash.slice(1).toLowerCase())||(0,s.g)("/rooms"),k()})),[i,f,m,g,b,v,y,w,$,E,o,p,k,function(e){console.log(e),r(8,$=e),r(9,E=!0)},e=>s.s.emit(`event:${i}`,e.key),()=>(0,s.g)("/rooms"),()=>{r(5,v=!0)},()=>(0,s.g)(`/room#${i}`),e=>{console.log("indestructibleLines ->",y),e.clientId===s.s.id?e.gameover?r(11,p=!0):(r(6,y=e.indestructibleLines),r(2,m=e.board),r(3,g=e.scores.score),r(4,b=e.scores.lines),r(7,w=e.nextShape),console.log(w.shape)):(e.gameover?f.set(e.clientId,((e,t)=>a(e,c({gameover:!0})))(((e,t)=>{for(var r in t||(t={}))h.call(t,r)&&d(e,r,t[r]);if(l)for(var r of l(t))u.call(t,r)&&d(e,r,t[r]);return e})({},f.get(e.clientId)))):f.set(e.clientId,{username:e.username,heights:e.heights,scores:e.scores}),r(1,f))},()=>{s.s.emit("leaveRoom"),(0,s.g)("/rooms")},()=>{s.s.emit("leaveRoom"),(0,s.g)("/rooms")},()=>{s.s.emit(`restart:${i}`)}]}class B extends n.S{constructor(e){super(),(0,n.i)(this,e,S,L,n.s,{},null,[-1,-1])}}},836:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var n=r(607),s=r(869),o=r(986);function i(e){let t,r,s,i,c,l,h,u,d,f,p,m,g,b,v,y,w={placeholder:"Enter an username",verify:a,maxlength:"16"};return f=new o.I({props:w}),e[1](f),{c(){t=(0,n.e)("main"),r=(0,n.e)("a"),s=(0,n.e)("img"),c=(0,n.k)(),l=(0,n.e)("form"),h=(0,n.e)("h2"),u=(0,n.t)("username"),d=(0,n.k)(),(0,n.w)(f.$$.fragment),p=(0,n.k)(),m=(0,n.e)("button"),g=(0,n.t)("PLAY"),this.h()},l(e){t=(0,n.c)(e,"MAIN",{class:!0});var o=(0,n.a)(t);r=(0,n.c)(o,"A",{id:!0,href:!0});var i=(0,n.a)(r);s=(0,n.c)(i,"IMG",{alt:!0,src:!0}),i.forEach(n.d),c=(0,n.m)(o),l=(0,n.c)(o,"FORM",{class:!0});var a=(0,n.a)(l);h=(0,n.c)(a,"H2",{});var b=(0,n.a)(h);u=(0,n.h)(b,"username"),b.forEach(n.d),d=(0,n.m)(a),(0,n.x)(f.$$.fragment,a),p=(0,n.m)(a),m=(0,n.c)(a,"BUTTON",{class:!0});var v=(0,n.a)(m);g=(0,n.h)(v,"PLAY"),v.forEach(n.d),a.forEach(n.d),o.forEach(n.d),this.h()},h(){(0,n.b)(s,"alt","logo"),(0,n.N)(s.src,i="/red-tetris-3d.png")||(0,n.b)(s,"src","/red-tetris-3d.png"),(0,n.b)(r,"id","logo"),(0,n.b)(r,"href","/"),(0,n.b)(m,"class","red-button"),(0,n.b)(l,"class","card"),(0,n.b)(t,"class","main")},m(o,i){(0,n.g)(o,t,i),(0,n.G)(t,r),(0,n.G)(r,s),(0,n.G)(t,c),(0,n.G)(t,l),(0,n.G)(l,h),(0,n.G)(h,u),(0,n.G)(l,d),(0,n.y)(f,l,null),(0,n.G)(l,p),(0,n.G)(l,m),(0,n.G)(m,g),b=!0,v||(y=(0,n.M)(l,"submit",e[2]),v=!0)},p(e,[t]){f.$set({})},i(e){b||((0,n.q)(f.$$.fragment,e),b=!0)},o(e){(0,n.o)(f.$$.fragment,e),b=!1},d(r){r&&(0,n.d)(t),e[1](null),(0,n.B)(f),v=!1,y()}}}r(249);const a=e=>e.trim()?/^[a-z0-9_-]*$/i.test(e)?void 0:"Username should only contains [a-z][0-9]_-":"Username required";function c(e,t,r){let o,i;return(0,n.K)(e,s.u,(e=>r(3,o=e))),(0,n.v)((()=>{i.focus(),i.setValue(o),i.setError(history.state.userNameError)})),[i,function(e){n.O[e?"unshift":"push"]((()=>{i=e,r(0,i)}))},e=>{e.preventDefault(),i.ok()&&(s.u.set(i.getValue()),(0,s.g)("/rooms"))}]}class l extends n.S{constructor(e){super(),(0,n.i)(this,e,c,i,n.s,{})}}},690:(e,t,r)=>{r.r(t),r.d(t,{default:()=>d});var n=r(607),s=r(869),o=r(318);function i(e,t,r){const n=e.slice();return n[25]=t[r],n}function a(e){let t,r,s,o=e[25]+"";return{c(){t=(0,n.e)("div"),r=(0,n.t)("- "),s=(0,n.t)(o)},l(e){t=(0,n.c)(e,"DIV",{});var i=(0,n.a)(t);r=(0,n.h)(i,"- "),s=(0,n.h)(i,o),i.forEach(n.d)},m(e,o){(0,n.g)(e,t,o),(0,n.G)(t,r),(0,n.G)(t,s)},p(e,t){2&t&&o!==(o=e[25]+"")&&(0,n.j)(s,o)},d(e){e&&(0,n.d)(t)}}}function c(e){let t,r,s,o;return{c(){t=(0,n.e)("button"),r=(0,n.t)("START"),this.h()},l(e){t=(0,n.c)(e,"BUTTON",{class:!0});var s=(0,n.a)(t);r=(0,n.h)(s,"START"),s.forEach(n.d),this.h()},h(){(0,n.b)(t,"class","red-button")},m(i,a){(0,n.g)(i,t,a),(0,n.G)(t,r),s||(o=(0,n.M)(t,"click",e[23]),s=!0)},p:n.E,d(e){e&&(0,n.d)(t),s=!1,o()}}}function l(e){let t,r;return{c(){t=(0,n.e)("p"),r=(0,n.t)("Waiting for owner to start the game...")},l(e){t=(0,n.c)(e,"P",{});var s=(0,n.a)(t);r=(0,n.h)(s,"Waiting for owner to start the game..."),s.forEach(n.d)},m(e,s){(0,n.g)(e,t,s),(0,n.G)(t,r)},d(e){e&&(0,n.d)(t)}}}function h(e){let t,r,s,h,u,d,f,p,m,g,b,v,y,w,$,E,k,_,x,G,R,O,A,N,L,S,B,I,T,j,C,P,q,D,M,V,U,H,F,z,K,J,Y,W,X,Q,Z,ee,te,re,ne,se,oe,ie,ae,ce,le,he;t=new o.L({props:{on:"roomNameError",handler:e[6]}}),s=new o.L({props:{on:"userNameError",handler:e[7]}}),u=new o.L({props:{on:"join:"+e[0],handler:e[8]}}),f=new o.L({props:{on:"start:"+e[0],handler:e[9]}}),m=new o.L({props:{on:"connect",handler:e[5]}}),b=new o.L({props:{on:"gameMode:"+e[0],handler:e[10]}}),y=new o.L({props:{on:"owner:"+e[0],handler:e[11]}});let ue=e[1],de=[];for(let t=0;t<ue.length;t+=1)de[t]=a(i(e,ue,t));let fe=e[2]&&c(e),pe=!e[2]&&l();return{c(){(0,n.w)(t.$$.fragment),r=(0,n.k)(),(0,n.w)(s.$$.fragment),h=(0,n.k)(),(0,n.w)(u.$$.fragment),d=(0,n.k)(),(0,n.w)(f.$$.fragment),p=(0,n.k)(),(0,n.w)(m.$$.fragment),g=(0,n.k)(),(0,n.w)(b.$$.fragment),v=(0,n.k)(),(0,n.w)(y.$$.fragment),w=(0,n.k)(),$=(0,n.e)("main"),E=(0,n.e)("a"),k=(0,n.e)("img"),x=(0,n.k)(),G=(0,n.e)("div"),R=(0,n.e)("h1"),O=(0,n.t)(e[0]),A=(0,n.k)();for(let e=0;e<de.length;e+=1)de[e].c();N=(0,n.k)(),L=(0,n.e)("div"),S=(0,n.e)("input"),B=(0,n.k)(),I=(0,n.e)("label"),T=(0,n.e)("img"),C=(0,n.k)(),P=(0,n.e)("input"),q=(0,n.k)(),D=(0,n.e)("label"),M=(0,n.e)("img"),U=(0,n.k)(),H=(0,n.e)("input"),F=(0,n.k)(),z=(0,n.e)("label"),K=(0,n.e)("img"),Y=(0,n.k)(),W=(0,n.e)("input"),X=(0,n.k)(),Q=(0,n.e)("label"),Z=(0,n.e)("img"),re=(0,n.k)(),ne=(0,n.e)("div"),se=(0,n.e)("button"),oe=(0,n.t)("LEAVE"),ie=(0,n.k)(),fe&&fe.c(),ae=(0,n.k)(),pe&&pe.c(),this.h()},l(o){(0,n.x)(t.$$.fragment,o),r=(0,n.m)(o),(0,n.x)(s.$$.fragment,o),h=(0,n.m)(o),(0,n.x)(u.$$.fragment,o),d=(0,n.m)(o),(0,n.x)(f.$$.fragment,o),p=(0,n.m)(o),(0,n.x)(m.$$.fragment,o),g=(0,n.m)(o),(0,n.x)(b.$$.fragment,o),v=(0,n.m)(o),(0,n.x)(y.$$.fragment,o),w=(0,n.m)(o),$=(0,n.c)(o,"MAIN",{class:!0});var i=(0,n.a)($);E=(0,n.c)(i,"A",{id:!0,href:!0});var a=(0,n.a)(E);k=(0,n.c)(a,"IMG",{alt:!0,src:!0}),a.forEach(n.d),x=(0,n.m)(i),G=(0,n.c)(i,"DIV",{class:!0});var c=(0,n.a)(G);R=(0,n.c)(c,"H1",{});var l=(0,n.a)(R);O=(0,n.h)(l,e[0]),l.forEach(n.d),A=(0,n.m)(c);for(let e=0;e<de.length;e+=1)de[e].l(c);N=(0,n.m)(c),L=(0,n.c)(c,"DIV",{class:!0});var _=(0,n.a)(L);S=(0,n.c)(_,"INPUT",{type:!0,name:!0,id:!0,class:!0}),B=(0,n.m)(_),I=(0,n.c)(_,"LABEL",{class:!0,for:!0});var j=(0,n.a)(I);T=(0,n.c)(j,"IMG",{src:!0,alt:!0,class:!0}),j.forEach(n.d),C=(0,n.m)(_),P=(0,n.c)(_,"INPUT",{type:!0,name:!0,id:!0,class:!0}),q=(0,n.m)(_),D=(0,n.c)(_,"LABEL",{class:!0,for:!0});var V=(0,n.a)(D);M=(0,n.c)(V,"IMG",{src:!0,alt:!0,class:!0}),V.forEach(n.d),U=(0,n.m)(_),H=(0,n.c)(_,"INPUT",{type:!0,name:!0,id:!0,class:!0}),F=(0,n.m)(_),z=(0,n.c)(_,"LABEL",{class:!0,for:!0});var J=(0,n.a)(z);K=(0,n.c)(J,"IMG",{src:!0,alt:!0,class:!0}),J.forEach(n.d),Y=(0,n.m)(_),W=(0,n.c)(_,"INPUT",{type:!0,name:!0,id:!0,class:!0}),X=(0,n.m)(_),Q=(0,n.c)(_,"LABEL",{class:!0,for:!0});var ee=(0,n.a)(Q);Z=(0,n.c)(ee,"IMG",{src:!0,alt:!0,class:!0}),ee.forEach(n.d),_.forEach(n.d),re=(0,n.m)(c),ne=(0,n.c)(c,"DIV",{class:!0});var te=(0,n.a)(ne);se=(0,n.c)(te,"BUTTON",{class:!0});var ce=(0,n.a)(se);oe=(0,n.h)(ce,"LEAVE"),ce.forEach(n.d),ie=(0,n.m)(te),fe&&fe.l(te),te.forEach(n.d),c.forEach(n.d),ae=(0,n.m)(i),pe&&pe.l(i),i.forEach(n.d),this.h()},h(){(0,n.b)(k,"alt","logo"),(0,n.N)(k.src,_="/red-tetris-3d.png")||(0,n.b)(k,"src","/red-tetris-3d.png"),(0,n.b)(E,"id","logo"),(0,n.b)(E,"href","/"),(0,n.b)(S,"type","radio"),(0,n.b)(S,"name","gameMode"),S.__value="moon",S.value=S.__value,(0,n.b)(S,"id","moon"),(0,n.b)(S,"class","svelte-101qcr2"),e[14][0].push(S),(0,n.N)(T.src,j="/game-mode/moon.png")||(0,n.b)(T,"src","/game-mode/moon.png"),(0,n.b)(T,"alt",""),(0,n.b)(T,"class","svelte-101qcr2"),(0,n.b)(I,"class","red-button svelte-101qcr2"),(0,n.b)(I,"for","moon"),(0,n.b)(P,"type","radio"),(0,n.b)(P,"name","gameMode"),P.__value="earth",P.value=P.__value,(0,n.b)(P,"id","earth"),(0,n.b)(P,"class","svelte-101qcr2"),e[14][0].push(P),(0,n.N)(M.src,V="/game-mode/earth.png")||(0,n.b)(M,"src","/game-mode/earth.png"),(0,n.b)(M,"alt",""),(0,n.b)(M,"class","svelte-101qcr2"),(0,n.b)(D,"class","red-button svelte-101qcr2"),(0,n.b)(D,"for","earth"),(0,n.b)(H,"type","radio"),(0,n.b)(H,"name","gameMode"),H.__value="sun",H.value=H.__value,(0,n.b)(H,"id","sun"),(0,n.b)(H,"class","svelte-101qcr2"),e[14][0].push(H),(0,n.N)(K.src,J="/game-mode/sun.png")||(0,n.b)(K,"src","/game-mode/sun.png"),(0,n.b)(K,"alt",""),(0,n.b)(K,"class","svelte-101qcr2"),(0,n.b)(z,"class","red-button svelte-101qcr2"),(0,n.b)(z,"for","sun"),(0,n.b)(W,"type","radio"),(0,n.b)(W,"name","gameMode"),W.__value="blackhole",W.value=W.__value,(0,n.b)(W,"id","blackhole"),(0,n.b)(W,"class","svelte-101qcr2"),e[14][0].push(W),(0,n.N)(Z.src,ee="/game-mode/blackhole.png")||(0,n.b)(Z,"src","/game-mode/blackhole.png"),(0,n.b)(Z,"alt",""),(0,n.b)(Z,"class","svelte-101qcr2"),(0,n.b)(Q,"class","red-button svelte-101qcr2"),(0,n.b)(Q,"for","blackhole"),(0,n.b)(L,"class",te="action "+(e[2]?"":"disabled")+" svelte-101qcr2"),(0,n.b)(se,"class","red-button"),(0,n.b)(ne,"class","action"),(0,n.b)(G,"class","card"),(0,n.b)($,"class","main")},m(o,i){(0,n.y)(t,o,i),(0,n.g)(o,r,i),(0,n.y)(s,o,i),(0,n.g)(o,h,i),(0,n.y)(u,o,i),(0,n.g)(o,d,i),(0,n.y)(f,o,i),(0,n.g)(o,p,i),(0,n.y)(m,o,i),(0,n.g)(o,g,i),(0,n.y)(b,o,i),(0,n.g)(o,v,i),(0,n.y)(y,o,i),(0,n.g)(o,w,i),(0,n.g)(o,$,i),(0,n.G)($,E),(0,n.G)(E,k),(0,n.G)($,x),(0,n.G)($,G),(0,n.G)(G,R),(0,n.G)(R,O),(0,n.G)(G,A);for(let e=0;e<de.length;e+=1)de[e].m(G,null);(0,n.G)(G,N),(0,n.G)(G,L),(0,n.G)(L,S),S.checked=S.__value===e[3],(0,n.G)(L,B),(0,n.G)(L,I),(0,n.G)(I,T),(0,n.G)(L,C),(0,n.G)(L,P),P.checked=P.__value===e[3],(0,n.G)(L,q),(0,n.G)(L,D),(0,n.G)(D,M),(0,n.G)(L,U),(0,n.G)(L,H),H.checked=H.__value===e[3],(0,n.G)(L,F),(0,n.G)(L,z),(0,n.G)(z,K),(0,n.G)(L,Y),(0,n.G)(L,W),W.checked=W.__value===e[3],(0,n.G)(L,X),(0,n.G)(L,Q),(0,n.G)(Q,Z),(0,n.G)(G,re),(0,n.G)(G,ne),(0,n.G)(ne,se),(0,n.G)(se,oe),(0,n.G)(ne,ie),fe&&fe.m(ne,null),(0,n.G)($,ae),pe&&pe.m($,null),ce=!0,le||(he=[(0,n.M)(E,"click",e[12]),(0,n.M)(S,"change",e[13]),(0,n.M)(S,"change",e[15]),(0,n.M)(P,"change",e[16]),(0,n.M)(P,"change",e[17]),(0,n.M)(H,"change",e[18]),(0,n.M)(H,"change",e[19]),(0,n.M)(W,"change",e[20]),(0,n.M)(W,"change",e[21]),(0,n.M)(se,"click",e[22])],le=!0)},p(e,[t]){const r={};1&t&&(r.on="join:"+e[0]),2&t&&(r.handler=e[8]),u.$set(r);const s={};1&t&&(s.on="start:"+e[0]),1&t&&(s.handler=e[9]),f.$set(s);const o={};1&t&&(o.on="gameMode:"+e[0]),8&t&&(o.handler=e[10]),b.$set(o);const h={};if(1&t&&(h.on="owner:"+e[0]),4&t&&(h.handler=e[11]),y.$set(h),(!ce||1&t)&&(0,n.j)(O,e[0]),2&t){let r;for(ue=e[1],r=0;r<ue.length;r+=1){const n=i(e,ue,r);de[r]?de[r].p(n,t):(de[r]=a(n),de[r].c(),de[r].m(G,N))}for(;r<de.length;r+=1)de[r].d(1);de.length=ue.length}8&t&&(S.checked=S.__value===e[3]),8&t&&(P.checked=P.__value===e[3]),8&t&&(H.checked=H.__value===e[3]),8&t&&(W.checked=W.__value===e[3]),(!ce||4&t&&te!==(te="action "+(e[2]?"":"disabled")+" svelte-101qcr2"))&&(0,n.b)(L,"class",te),e[2]?fe?fe.p(e,t):(fe=c(e),fe.c(),fe.m(ne,null)):fe&&(fe.d(1),fe=null),e[2]?pe&&(pe.d(1),pe=null):pe||(pe=l(),pe.c(),pe.m($,null))},i(e){ce||((0,n.q)(t.$$.fragment,e),(0,n.q)(s.$$.fragment,e),(0,n.q)(u.$$.fragment,e),(0,n.q)(f.$$.fragment,e),(0,n.q)(m.$$.fragment,e),(0,n.q)(b.$$.fragment,e),(0,n.q)(y.$$.fragment,e),ce=!0)},o(e){(0,n.o)(t.$$.fragment,e),(0,n.o)(s.$$.fragment,e),(0,n.o)(u.$$.fragment,e),(0,n.o)(f.$$.fragment,e),(0,n.o)(m.$$.fragment,e),(0,n.o)(b.$$.fragment,e),(0,n.o)(y.$$.fragment,e),ce=!1},d(o){(0,n.B)(t,o),o&&(0,n.d)(r),(0,n.B)(s,o),o&&(0,n.d)(h),(0,n.B)(u,o),o&&(0,n.d)(d),(0,n.B)(f,o),o&&(0,n.d)(p),(0,n.B)(m,o),o&&(0,n.d)(g),(0,n.B)(b,o),o&&(0,n.d)(v),(0,n.B)(y,o),o&&(0,n.d)(w),o&&(0,n.d)($),(0,n.L)(de,o),e[14][0].splice(e[14][0].indexOf(S),1),e[14][0].splice(e[14][0].indexOf(P),1),e[14][0].splice(e[14][0].indexOf(H),1),e[14][0].splice(e[14][0].indexOf(W),1),fe&&fe.d(),pe&&pe.d(),le=!1,(0,n.Q)(he)}}}function u(e,t,r){let o;(0,n.K)(e,s.u,(e=>r(24,o=e)));let i,a="",c=[],l=!1;function h(e){s.s.emit(`gameMode:${a}`,e)}function u(){s.s.emit("joinRoom",{name:a,user:o}),h(void 0)}return(0,n.v)((()=>(r(0,a=location.hash.slice(1).toLowerCase()),u(),()=>{r(2,l=!1)}))),[a,c,l,i,h,u,e=>{(0,s.g)("/rooms",{state:{roomNameError:e}})},e=>{(0,s.g)("/",{state:{userNameError:e}})},e=>{r(1,c=e)},()=>{(0,s.g)(`/game#${a}`)},e=>{r(3,i=e)},()=>{r(2,l=!0)},()=>{s.s.emit("leaveRoom")},function(){i=this.__value,r(3,i)},[[]],()=>h(i),function(){i=this.__value,r(3,i)},()=>h(i),function(){i=this.__value,r(3,i)},()=>h(i),function(){i=this.__value,r(3,i)},()=>h(i),()=>{s.s.emit("leaveRoom"),(0,s.g)("/rooms")},()=>s.s.emit(`start:${a}`)]}r(249);class d extends n.S{constructor(e){super(),(0,n.i)(this,e,u,h,n.s,{})}}},279:(e,t,r)=>{r.r(t),r.d(t,{default:()=>E});var n=r(607),s=r(869),o=r(986),i=r(318);function a(e,t,r){const n=e.slice();return n[9]=t[r],n}function c(e,t,r){const n=e.slice();return n[12]=t[r],n}function l(e,t,r){const n=e.slice();return n[9]=t[r],n}function h(e){let t,r;return{c(){t=(0,n.e)("p"),r=(0,n.t)("No game yet"),this.h()},l(e){t=(0,n.c)(e,"P",{style:!0});var s=(0,n.a)(t);r=(0,n.h)(s,"No game yet"),s.forEach(n.d),this.h()},h(){(0,n.f)(t,"text-align","center")},m(e,s){(0,n.g)(e,t,s),(0,n.G)(t,r)},p:n.E,d(e){e&&(0,n.d)(t)}}}function u(e){let t,r=e[1],s=[];for(let t=0;t<r.length;t+=1)s[t]=d(l(e,r,t));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=(0,n.l)()},l(e){for(let t=0;t<s.length;t+=1)s[t].l(e);t=(0,n.l)()},m(e,r){for(let t=0;t<s.length;t+=1)s[t].m(e,r);(0,n.g)(e,t,r)},p(e,n){if(2&n){let o;for(r=e[1],o=0;o<r.length;o+=1){const i=l(e,r,o);s[o]?s[o].p(i,n):(s[o]=d(i),s[o].c(),s[o].m(t.parentNode,t))}for(;o<s.length;o+=1)s[o].d(1);s.length=r.length}},d(e){(0,n.L)(s,e),e&&(0,n.d)(t)}}}function d(e){let t,r,s,o,i,a,c,l=e[9].username+"",h=e[9].score+"";return{c(){t=(0,n.e)("div"),r=(0,n.e)("span"),s=(0,n.t)(l),o=(0,n.k)(),i=(0,n.e)("span"),a=(0,n.t)(h),c=(0,n.k)(),this.h()},l(e){t=(0,n.c)(e,"DIV",{class:!0});var u=(0,n.a)(t);r=(0,n.c)(u,"SPAN",{});var d=(0,n.a)(r);s=(0,n.h)(d,l),d.forEach(n.d),o=(0,n.m)(u),i=(0,n.c)(u,"SPAN",{});var f=(0,n.a)(i);a=(0,n.h)(f,h),f.forEach(n.d),c=(0,n.m)(u),u.forEach(n.d),this.h()},h(){(0,n.b)(t,"class","score svelte-1uappw5")},m(e,l){(0,n.g)(e,t,l),(0,n.G)(t,r),(0,n.G)(r,s),(0,n.G)(t,o),(0,n.G)(t,i),(0,n.G)(i,a),(0,n.G)(t,c)},p(e,t){2&t&&l!==(l=e[9].username+"")&&(0,n.j)(s,l),2&t&&h!==(h=e[9].score+"")&&(0,n.j)(a,h)},d(e){e&&(0,n.d)(t)}}}function f(e){let t,r;return{c(){t=(0,n.e)("p"),r=(0,n.t)("Currently no room available")},l(e){t=(0,n.c)(e,"P",{});var s=(0,n.a)(t);r=(0,n.h)(s,"Currently no room available"),s.forEach(n.d)},m(e,s){(0,n.g)(e,t,s),(0,n.G)(t,r)},p:n.E,d(e){e&&(0,n.d)(t)}}}function p(e){let t,r=e[3],s=[];for(let t=0;t<r.length;t+=1)s[t]=m(c(e,r,t));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=(0,n.l)()},l(e){for(let t=0;t<s.length;t+=1)s[t].l(e);t=(0,n.l)()},m(e,r){for(let t=0;t<s.length;t+=1)s[t].m(e,r);(0,n.g)(e,t,r)},p(e,n){if(8&n){let o;for(r=e[3],o=0;o<r.length;o+=1){const i=c(e,r,o);s[o]?s[o].p(i,n):(s[o]=m(i),s[o].c(),s[o].m(t.parentNode,t))}for(;o<s.length;o+=1)s[o].d(1);s.length=r.length}},d(e){(0,n.L)(s,e),e&&(0,n.d)(t)}}}function m(e){let t,r,o,i,a,c,l,h,u,d,f,p,m=e[12].name+"",g=e[12].nbPlayer+"";return{c(){t=(0,n.e)("div"),r=(0,n.e)("p"),o=(0,n.t)(m),i=(0,n.k)(),a=(0,n.e)("p"),c=(0,n.t)(g),l=(0,n.k)(),h=(0,n.e)("button"),u=(0,n.t)("join"),d=(0,n.k)(),this.h()},l(e){t=(0,n.c)(e,"DIV",{class:!0});var s=(0,n.a)(t);r=(0,n.c)(s,"P",{class:!0});var f=(0,n.a)(r);o=(0,n.h)(f,m),f.forEach(n.d),i=(0,n.m)(s),a=(0,n.c)(s,"P",{class:!0});var p=(0,n.a)(a);c=(0,n.h)(p,g),p.forEach(n.d),l=(0,n.m)(s),h=(0,n.c)(s,"BUTTON",{class:!0});var b=(0,n.a)(h);u=(0,n.h)(b,"join"),b.forEach(n.d),d=(0,n.m)(s),s.forEach(n.d),this.h()},h(){(0,n.b)(r,"class","room-list-title svelte-1uappw5"),(0,n.b)(a,"class","room-number svelte-1uappw5"),(0,n.b)(h,"class","red-button room-button svelte-1uappw5"),(0,n.b)(t,"class","room-card svelte-1uappw5")},m(m,g){(0,n.g)(m,t,g),(0,n.G)(t,r),(0,n.G)(r,o),(0,n.G)(t,i),(0,n.G)(t,a),(0,n.G)(a,c),(0,n.G)(t,l),(0,n.G)(t,h),(0,n.G)(h,u),(0,n.G)(t,d),f||(p=(0,n.M)(h,"click",(function(){(0,n.R)((0,s.g)(`/room#${e[12].name}`))&&(0,s.g)(`/room#${e[12].name}`).apply(this,arguments)})),f=!0)},p(t,r){e=t,8&r&&m!==(m=e[12].name+"")&&(0,n.j)(o,m),8&r&&g!==(g=e[12].nbPlayer+"")&&(0,n.j)(c,g)},d(e){e&&(0,n.d)(t),f=!1,p()}}}function g(e){let t,r;return{c(){t=(0,n.e)("p"),r=(0,n.t)("No game yet"),this.h()},l(e){t=(0,n.c)(e,"P",{style:!0});var s=(0,n.a)(t);r=(0,n.h)(s,"No game yet"),s.forEach(n.d),this.h()},h(){(0,n.f)(t,"text-align","center")},m(e,s){(0,n.g)(e,t,s),(0,n.G)(t,r)},p:n.E,d(e){e&&(0,n.d)(t)}}}function b(e){let t,r=e[2],s=[];for(let t=0;t<r.length;t+=1)s[t]=v(a(e,r,t));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=(0,n.l)()},l(e){for(let t=0;t<s.length;t+=1)s[t].l(e);t=(0,n.l)()},m(e,r){for(let t=0;t<s.length;t+=1)s[t].m(e,r);(0,n.g)(e,t,r)},p(e,n){if(4&n){let o;for(r=e[2],o=0;o<r.length;o+=1){const i=a(e,r,o);s[o]?s[o].p(i,n):(s[o]=v(i),s[o].c(),s[o].m(t.parentNode,t))}for(;o<s.length;o+=1)s[o].d(1);s.length=r.length}},d(e){(0,n.L)(s,e),e&&(0,n.d)(t)}}}function v(e){let t,r,s,o,i,a,c,l=e[9].username+"",h=e[9].score+"";return{c(){t=(0,n.e)("div"),r=(0,n.e)("span"),s=(0,n.t)(l),o=(0,n.k)(),i=(0,n.e)("span"),a=(0,n.t)(h),c=(0,n.k)(),this.h()},l(e){t=(0,n.c)(e,"DIV",{class:!0});var u=(0,n.a)(t);r=(0,n.c)(u,"SPAN",{});var d=(0,n.a)(r);s=(0,n.h)(d,l),d.forEach(n.d),o=(0,n.m)(u),i=(0,n.c)(u,"SPAN",{});var f=(0,n.a)(i);a=(0,n.h)(f,h),f.forEach(n.d),c=(0,n.m)(u),u.forEach(n.d),this.h()},h(){(0,n.b)(t,"class","score svelte-1uappw5")},m(e,l){(0,n.g)(e,t,l),(0,n.G)(t,r),(0,n.G)(r,s),(0,n.G)(t,o),(0,n.G)(t,i),(0,n.G)(i,a),(0,n.G)(t,c)},p(e,t){4&t&&l!==(l=e[9].username+"")&&(0,n.j)(s,l),4&t&&h!==(h=e[9].score+"")&&(0,n.j)(a,h)},d(e){e&&(0,n.d)(t)}}}function y(e){let t,r,s,a,c,l,d,m,v,y,$,E,k,_,x,G,R,O,A,N,L,S,B,I,T,j,C,P,q,D,M,V,U,H,F,z,K;function J(e,t){return e[1].length?u:h}t=new i.L({props:{on:"roomList",handler:e[4]}}),s=new i.L({props:{on:"scoresList",handler:e[5]}});let Y=J(e),W=Y(e),X={placeholder:"Enter a roomname",verify:w,maxlength:"16"};function Q(e,t){return e[3].length?p:f}L=new o.I({props:X}),e[6](L);let Z=Q(e),ee=Z(e);function te(e,t){return e[2].length?b:g}let re=te(e),ne=re(e);return{c(){(0,n.w)(t.$$.fragment),r=(0,n.k)(),(0,n.w)(s.$$.fragment),a=(0,n.k)(),c=(0,n.e)("main"),l=(0,n.e)("a"),d=(0,n.e)("img"),v=(0,n.k)(),y=(0,n.e)("div"),$=(0,n.e)("div"),E=(0,n.e)("h2"),k=(0,n.t)("User scores"),_=(0,n.k)(),W.c(),x=(0,n.k)(),G=(0,n.e)("div"),R=(0,n.e)("form"),O=(0,n.e)("h2"),A=(0,n.t)("Create / Join room"),N=(0,n.k)(),(0,n.w)(L.$$.fragment),S=(0,n.k)(),B=(0,n.e)("button"),I=(0,n.t)("JOIN"),T=(0,n.k)(),j=(0,n.e)("div"),C=(0,n.e)("h2"),P=(0,n.t)("Room List"),q=(0,n.k)(),ee.c(),D=(0,n.k)(),M=(0,n.e)("div"),V=(0,n.e)("h2"),U=(0,n.t)("Bests scores"),H=(0,n.k)(),ne.c(),this.h()},l(e){(0,n.x)(t.$$.fragment,e),r=(0,n.m)(e),(0,n.x)(s.$$.fragment,e),a=(0,n.m)(e),c=(0,n.c)(e,"MAIN",{class:!0});var o=(0,n.a)(c);l=(0,n.c)(o,"A",{id:!0,href:!0});var i=(0,n.a)(l);d=(0,n.c)(i,"IMG",{alt:!0,src:!0}),i.forEach(n.d),v=(0,n.m)(o),y=(0,n.c)(o,"DIV",{class:!0});var h=(0,n.a)(y);$=(0,n.c)(h,"DIV",{class:!0});var u=(0,n.a)($);E=(0,n.c)(u,"H2",{});var f=(0,n.a)(E);k=(0,n.h)(f,"User scores"),f.forEach(n.d),_=(0,n.m)(u),W.l(u),u.forEach(n.d),x=(0,n.m)(h),G=(0,n.c)(h,"DIV",{class:!0});var p=(0,n.a)(G);R=(0,n.c)(p,"FORM",{class:!0});var m=(0,n.a)(R);O=(0,n.c)(m,"H2",{});var g=(0,n.a)(O);A=(0,n.h)(g,"Create / Join room"),g.forEach(n.d),N=(0,n.m)(m),(0,n.x)(L.$$.fragment,m),S=(0,n.m)(m),B=(0,n.c)(m,"BUTTON",{class:!0});var b=(0,n.a)(B);I=(0,n.h)(b,"JOIN"),b.forEach(n.d),m.forEach(n.d),T=(0,n.m)(p),j=(0,n.c)(p,"DIV",{class:!0});var w=(0,n.a)(j);C=(0,n.c)(w,"H2",{});var F=(0,n.a)(C);P=(0,n.h)(F,"Room List"),F.forEach(n.d),q=(0,n.m)(w),ee.l(w),w.forEach(n.d),p.forEach(n.d),D=(0,n.m)(h),M=(0,n.c)(h,"DIV",{class:!0});var z=(0,n.a)(M);V=(0,n.c)(z,"H2",{});var K=(0,n.a)(V);U=(0,n.h)(K,"Bests scores"),K.forEach(n.d),H=(0,n.m)(z),ne.l(z),z.forEach(n.d),h.forEach(n.d),o.forEach(n.d),this.h()},h(){(0,n.b)(d,"alt","logo"),(0,n.N)(d.src,m="/red-tetris-3d.png")||(0,n.b)(d,"src","/red-tetris-3d.png"),(0,n.b)(l,"id","logo"),(0,n.b)(l,"href","/"),(0,n.b)($,"class","card scores svelte-1uappw5"),(0,n.b)(B,"class","red-button"),(0,n.b)(R,"class","card"),(0,n.b)(j,"class","card"),(0,n.b)(G,"class","vflex svelte-1uappw5"),(0,n.b)(M,"class","card scores svelte-1uappw5"),(0,n.b)(y,"class","hflex svelte-1uappw5"),(0,n.b)(c,"class","main")},m(o,i){(0,n.y)(t,o,i),(0,n.g)(o,r,i),(0,n.y)(s,o,i),(0,n.g)(o,a,i),(0,n.g)(o,c,i),(0,n.G)(c,l),(0,n.G)(l,d),(0,n.G)(c,v),(0,n.G)(c,y),(0,n.G)(y,$),(0,n.G)($,E),(0,n.G)(E,k),(0,n.G)($,_),W.m($,null),(0,n.G)(y,x),(0,n.G)(y,G),(0,n.G)(G,R),(0,n.G)(R,O),(0,n.G)(O,A),(0,n.G)(R,N),(0,n.y)(L,R,null),(0,n.G)(R,S),(0,n.G)(R,B),(0,n.G)(B,I),(0,n.G)(G,T),(0,n.G)(G,j),(0,n.G)(j,C),(0,n.G)(C,P),(0,n.G)(j,q),ee.m(j,null),(0,n.G)(y,D),(0,n.G)(y,M),(0,n.G)(M,V),(0,n.G)(V,U),(0,n.G)(M,H),ne.m(M,null),F=!0,z||(K=(0,n.M)(R,"submit",e[7]),z=!0)},p(e,[r]){const n={};8&r&&(n.handler=e[4]),t.$set(n);const o={};6&r&&(o.handler=e[5]),s.$set(o),Y===(Y=J(e))&&W?W.p(e,r):(W.d(1),W=Y(e),W&&(W.c(),W.m($,null))),L.$set({}),Z===(Z=Q(e))&&ee?ee.p(e,r):(ee.d(1),ee=Z(e),ee&&(ee.c(),ee.m(j,null))),re===(re=te(e))&&ne?ne.p(e,r):(ne.d(1),ne=re(e),ne&&(ne.c(),ne.m(M,null)))},i(e){F||((0,n.q)(t.$$.fragment,e),(0,n.q)(s.$$.fragment,e),(0,n.q)(L.$$.fragment,e),F=!0)},o(e){(0,n.o)(t.$$.fragment,e),(0,n.o)(s.$$.fragment,e),(0,n.o)(L.$$.fragment,e),F=!1},d(o){(0,n.B)(t,o),o&&(0,n.d)(r),(0,n.B)(s,o),o&&(0,n.d)(a),o&&(0,n.d)(c),W.d(),e[6](null),(0,n.B)(L),ee.d(),ne.d(),z=!1,K()}}}r(249);const w=e=>e?/^[a-z0-9_-]*$/i.test(e)?void 0:"Roomname should only contains [a-z][0-9]_-":"Roomname required";function $(e,t,r){let o;(0,n.K)(e,s.u,(e=>r(8,o=e)));let i,a=[],c=[],l=[];return(0,n.v)((()=>{s.s.emit("getRoomList"),s.s.emit("getScoresList",o),i.focus(),i.setError(history.state.roomNameError)})),[i,a,c,l,e=>{r(3,l=e)},e=>{r(1,a=e.userScores),r(2,c=e.bestScores)},function(e){n.O[e?"unshift":"push"]((()=>{i=e,r(0,i)}))},e=>{e.preventDefault(),i.ok()&&(0,s.g)(`/room#${i.getValue().toLowerCase()}`)}]}class E extends n.S{constructor(e){super(),(0,n.i)(this,e,$,y,n.s,{})}}}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{r.d(n,{start:()=>W});var e=r(607),t=r(249),s=Object.defineProperty,o=Object.defineProperties,i=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,h=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t||(t={}))c.call(t,r)&&h(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&h(e,r,t[r]);return e},d=(e,t)=>o(e,i(t));let f="",p="";function m(t){let r,n,s;const o=[t[1]||{}];var i=t[0][0];function a(t){let r={};for(let t=0;t<o.length;t+=1)r=(0,e.C)(r,o[t]);return{props:r}}return i&&(r=new i(a())),{c(){r&&(0,e.w)(r.$$.fragment),n=(0,e.l)()},l(t){r&&(0,e.x)(r.$$.fragment,t),n=(0,e.l)()},m(t,o){r&&(0,e.y)(r,t,o),(0,e.g)(t,n,o),s=!0},p(t,s){const c=2&s?(0,e.z)(o,[(0,e.A)(t[1]||{})]):{};if(i!==(i=t[0][0])){if(r){(0,e.n)();const t=r;(0,e.o)(t.$$.fragment,1,0,(()=>{(0,e.B)(t,1)})),(0,e.p)()}i?(r=new i(a()),(0,e.w)(r.$$.fragment),(0,e.q)(r.$$.fragment,1),(0,e.y)(r,n.parentNode,n)):r=null}else i&&r.$set(c)},i(t){s||(r&&(0,e.q)(r.$$.fragment,t),s=!0)},o(t){r&&(0,e.o)(r.$$.fragment,t),s=!1},d(t){t&&(0,e.d)(n),r&&(0,e.B)(r,t)}}}function g(t){let r,n,s;const o=[t[1]||{}];var i=t[0][0];function a(t){let r={$$slots:{default:[w]},$$scope:{ctx:t}};for(let t=0;t<o.length;t+=1)r=(0,e.C)(r,o[t]);return{props:r}}return i&&(r=new i(a(t))),{c(){r&&(0,e.w)(r.$$.fragment),n=(0,e.l)()},l(t){r&&(0,e.x)(r.$$.fragment,t),n=(0,e.l)()},m(t,o){r&&(0,e.y)(r,t,o),(0,e.g)(t,n,o),s=!0},p(t,s){const c=2&s?(0,e.z)(o,[(0,e.A)(t[1]||{})]):{};if(525&s&&(c.$$scope={dirty:s,ctx:t}),i!==(i=t[0][0])){if(r){(0,e.n)();const t=r;(0,e.o)(t.$$.fragment,1,0,(()=>{(0,e.B)(t,1)})),(0,e.p)()}i?(r=new i(a(t)),(0,e.w)(r.$$.fragment),(0,e.q)(r.$$.fragment,1),(0,e.y)(r,n.parentNode,n)):r=null}else i&&r.$set(c)},i(t){s||(r&&(0,e.q)(r.$$.fragment,t),s=!0)},o(t){r&&(0,e.o)(r.$$.fragment,t),s=!1},d(t){t&&(0,e.d)(n),r&&(0,e.B)(r,t)}}}function b(t){let r,n,s;const o=[t[2]||{}];var i=t[0][1];function a(t){let r={};for(let t=0;t<o.length;t+=1)r=(0,e.C)(r,o[t]);return{props:r}}return i&&(r=new i(a())),{c(){r&&(0,e.w)(r.$$.fragment),n=(0,e.l)()},l(t){r&&(0,e.x)(r.$$.fragment,t),n=(0,e.l)()},m(t,o){r&&(0,e.y)(r,t,o),(0,e.g)(t,n,o),s=!0},p(t,s){const c=4&s?(0,e.z)(o,[(0,e.A)(t[2]||{})]):{};if(i!==(i=t[0][1])){if(r){(0,e.n)();const t=r;(0,e.o)(t.$$.fragment,1,0,(()=>{(0,e.B)(t,1)})),(0,e.p)()}i?(r=new i(a()),(0,e.w)(r.$$.fragment),(0,e.q)(r.$$.fragment,1),(0,e.y)(r,n.parentNode,n)):r=null}else i&&r.$set(c)},i(t){s||(r&&(0,e.q)(r.$$.fragment,t),s=!0)},o(t){r&&(0,e.o)(r.$$.fragment,t),s=!1},d(t){t&&(0,e.d)(n),r&&(0,e.B)(r,t)}}}function v(t){let r,n,s;const o=[t[2]||{}];var i=t[0][1];function a(t){let r={$$slots:{default:[y]},$$scope:{ctx:t}};for(let t=0;t<o.length;t+=1)r=(0,e.C)(r,o[t]);return{props:r}}return i&&(r=new i(a(t))),{c(){r&&(0,e.w)(r.$$.fragment),n=(0,e.l)()},l(t){r&&(0,e.x)(r.$$.fragment,t),n=(0,e.l)()},m(t,o){r&&(0,e.y)(r,t,o),(0,e.g)(t,n,o),s=!0},p(t,s){const c=4&s?(0,e.z)(o,[(0,e.A)(t[2]||{})]):{};if(521&s&&(c.$$scope={dirty:s,ctx:t}),i!==(i=t[0][1])){if(r){(0,e.n)();const t=r;(0,e.o)(t.$$.fragment,1,0,(()=>{(0,e.B)(t,1)})),(0,e.p)()}i?(r=new i(a(t)),(0,e.w)(r.$$.fragment),(0,e.q)(r.$$.fragment,1),(0,e.y)(r,n.parentNode,n)):r=null}else i&&r.$set(c)},i(t){s||(r&&(0,e.q)(r.$$.fragment,t),s=!0)},o(t){r&&(0,e.o)(r.$$.fragment,t),s=!1},d(t){t&&(0,e.d)(n),r&&(0,e.B)(r,t)}}}function y(t){let r,n,s;const o=[t[3]||{}];var i=t[0][2];function a(t){let r={};for(let t=0;t<o.length;t+=1)r=(0,e.C)(r,o[t]);return{props:r}}return i&&(r=new i(a())),{c(){r&&(0,e.w)(r.$$.fragment),n=(0,e.l)()},l(t){r&&(0,e.x)(r.$$.fragment,t),n=(0,e.l)()},m(t,o){r&&(0,e.y)(r,t,o),(0,e.g)(t,n,o),s=!0},p(t,s){const c=8&s?(0,e.z)(o,[(0,e.A)(t[3]||{})]):{};if(i!==(i=t[0][2])){if(r){(0,e.n)();const t=r;(0,e.o)(t.$$.fragment,1,0,(()=>{(0,e.B)(t,1)})),(0,e.p)()}i?(r=new i(a()),(0,e.w)(r.$$.fragment),(0,e.q)(r.$$.fragment,1),(0,e.y)(r,n.parentNode,n)):r=null}else i&&r.$set(c)},i(t){s||(r&&(0,e.q)(r.$$.fragment,t),s=!0)},o(t){r&&(0,e.o)(r.$$.fragment,t),s=!1},d(t){t&&(0,e.d)(n),r&&(0,e.B)(r,t)}}}function w(t){let r,n,s,o;const i=[v,b],a=[];function c(e,t){return e[0][2]?0:1}return r=c(t),n=a[r]=i[r](t),{c(){n.c(),s=(0,e.l)()},l(t){n.l(t),s=(0,e.l)()},m(t,n){a[r].m(t,n),(0,e.g)(t,s,n),o=!0},p(t,o){let l=r;r=c(t),r===l?a[r].p(t,o):((0,e.n)(),(0,e.o)(a[l],1,1,(()=>{a[l]=null})),(0,e.p)(),n=a[r],n?n.p(t,o):(n=a[r]=i[r](t),n.c()),(0,e.q)(n,1),n.m(s.parentNode,s))},i(t){o||((0,e.q)(n),o=!0)},o(t){(0,e.o)(n),o=!1},d(t){a[r].d(t),t&&(0,e.d)(s)}}}function $(t){let r,n=t[5]&&E(t);return{c(){r=(0,e.e)("div"),n&&n.c(),this.h()},l(t){r=(0,e.c)(t,"DIV",{id:!0,"aria-live":!0,"aria-atomic":!0,style:!0});var s=(0,e.a)(r);n&&n.l(s),s.forEach(e.d),this.h()},h(){(0,e.b)(r,"id","svelte-announcer"),(0,e.b)(r,"aria-live","assertive"),(0,e.b)(r,"aria-atomic","true"),(0,e.f)(r,"position","absolute"),(0,e.f)(r,"left","0"),(0,e.f)(r,"top","0"),(0,e.f)(r,"clip","rect(0 0 0 0)"),(0,e.f)(r,"clip-path","inset(50%)"),(0,e.f)(r,"overflow","hidden"),(0,e.f)(r,"white-space","nowrap"),(0,e.f)(r,"width","1px"),(0,e.f)(r,"height","1px")},m(t,s){(0,e.g)(t,r,s),n&&n.m(r,null)},p(e,t){e[5]?n?n.p(e,t):(n=E(e),n.c(),n.m(r,null)):n&&(n.d(1),n=null)},d(t){t&&(0,e.d)(r),n&&n.d()}}}function E(t){let r;return{c(){r=(0,e.t)(t[6])},l(n){r=(0,e.h)(n,t[6])},m(t,n){(0,e.g)(t,r,n)},p(t,n){64&n&&(0,e.j)(r,t[6])},d(t){t&&(0,e.d)(r)}}}function k(t){let r,n,s,o,i;const a=[g,m],c=[];function l(e,t){return e[0][1]?0:1}r=l(t),n=c[r]=a[r](t);let h=t[4]&&$(t);return{c(){n.c(),s=(0,e.k)(),h&&h.c(),o=(0,e.l)()},l(t){n.l(t),s=(0,e.m)(t),h&&h.l(t),o=(0,e.l)()},m(t,n){c[r].m(t,n),(0,e.g)(t,s,n),h&&h.m(t,n),(0,e.g)(t,o,n),i=!0},p(t,[i]){let u=r;r=l(t),r===u?c[r].p(t,i):((0,e.n)(),(0,e.o)(c[u],1,1,(()=>{c[u]=null})),(0,e.p)(),n=c[r],n?n.p(t,i):(n=c[r]=a[r](t),n.c()),(0,e.q)(n,1),n.m(s.parentNode,s)),t[4]?h?h.p(t,i):(h=$(t),h.c(),h.m(o.parentNode,o)):h&&(h.d(1),h=null)},i(t){i||((0,e.q)(n),i=!0)},o(t){(0,e.o)(n),i=!1},d(t){c[r].d(t),t&&(0,e.d)(s),h&&h.d(t),t&&(0,e.d)(o)}}}function _(t,r,n){let{stores:s}=r,{page:o}=r,{components:i}=r,{props_0:a=null}=r,{props_1:c=null}=r,{props_2:l=null}=r;(0,e.r)("__svelte__",s),(0,e.u)(s.page.notify);let h=!1,u=!1,d=null;return(0,e.v)((()=>{const e=s.page.subscribe((()=>{h&&(n(5,u=!0),n(6,d=document.title||"untitled page"))}));return n(4,h=!0),e})),t.$$set=e=>{"stores"in e&&n(7,s=e.stores),"page"in e&&n(8,o=e.page),"components"in e&&n(0,i=e.components),"props_0"in e&&n(1,a=e.props_0),"props_1"in e&&n(2,c=e.props_1),"props_2"in e&&n(3,l=e.props_2)},t.$$.update=()=>{384&t.$$.dirty&&s.page.set(o)},[i,a,c,l,h,u,d,s,o]}class x extends e.S{constructor(t){super(),(0,e.i)(this,t,_,k,e.s,{stores:7,page:8,components:0,props_0:1,props_1:2,props_2:3})}}const G={},R=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`/_app/immutable/${e}`)in G)return;G[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script",n.crossOrigin=""),n.href=e,document.head.appendChild(n),t?new Promise(((t,r)=>{n.addEventListener("load",t),n.addEventListener("error",(()=>r(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e())):e()},O=[()=>R((()=>Promise.resolve().then(r.bind(r,655))),["pages/__layout.svelte-14f06d4e.js","assets/pages/__layout.svelte-7dbccc91.css","chunks/index-e3403faa.js","chunks/navigation-bc679d77.js","chunks/singletons-821506ee.js"]),()=>R((()=>Promise.resolve().then(r.bind(r,50))),["error.svelte-e4e01923.js","chunks/index-e3403faa.js"]),()=>R((()=>Promise.resolve().then(r.bind(r,545))),["pages/game.svelte-e8da9ae3.js","assets/pages/game.svelte-04d7ac51.css","chunks/index-e3403faa.js","chunks/navigation-bc679d77.js","chunks/singletons-821506ee.js","chunks/Listener-f4bb6e30.js"]),()=>R((()=>Promise.resolve().then(r.bind(r,836))),["pages/index.svelte-b03af14e.js","chunks/index-e3403faa.js","chunks/navigation-bc679d77.js","chunks/singletons-821506ee.js","chunks/Input-e2d482c7.js"]),()=>R((()=>Promise.resolve().then(r.bind(r,690))),["pages/room.svelte-26dbaf69.js","assets/pages/room.svelte-98c311df.css","chunks/index-e3403faa.js","chunks/navigation-bc679d77.js","chunks/singletons-821506ee.js","chunks/Listener-f4bb6e30.js"]),()=>R((()=>Promise.resolve().then(r.bind(r,279))),["pages/rooms.svelte-dfedcd3c.js","assets/pages/rooms.svelte-b7f229bb.css","chunks/index-e3403faa.js","chunks/navigation-bc679d77.js","chunks/singletons-821506ee.js","chunks/Input-e2d482c7.js","chunks/Listener-f4bb6e30.js"])];function A(e){return e instanceof Error||e&&e.name&&e.message?e:new Error(JSON.stringify(e))}function N(e){if(e.fallthrough)throw new Error("fallthrough is no longer supported. Use matchers instead: https://kit.svelte.dev/docs/routing#advanced-routing-matching");if("maxage"in e)throw new Error("maxage should be replaced with cache: { maxage }");const t=e.status&&e.status>=400&&e.status<=599&&!e.redirect;if(e.error||t){const r=e.status;if(!e.error&&t)return{status:r||500,error:new Error};const n="string"==typeof e.error?new Error(e.error):e.error;return n instanceof Error?!r||r<400||r>599?(console.warn('"error" returned from load() without a valid status code  defaulting to 500'),{status:500,error:n}):{status:r,error:n}:{status:500,error:new Error(`"error" property returned from load() must be a string or instance of Error, received type "${typeof n}"`)}}if(e.redirect){if(!e.status||3!==Math.floor(e.status/100))throw new Error('"redirect" property returned from load() must be accompanied by a 3xx status code');if("string"!=typeof e.redirect)throw new Error('"redirect" property returned from load() must be a string')}if(e.dependencies&&(!Array.isArray(e.dependencies)||e.dependencies.some((e=>"string"!=typeof e))))throw new Error('"dependencies" property returned from load() must be of type string[]');if(e.context)throw new Error('You are returning "context" from a load function. "context" was renamed to "stuff", please adjust your code accordingly.');return e}function L(e){let t=e.baseURI;if(!t){const r=e.getElementsByTagName("base");t=r.length?r[0].href:e.URL}return t}function S(){return{x:pageXOffset,y:pageYOffset}}function B(e){return e.composedPath().find((e=>e instanceof Node&&"A"===e.nodeName.toUpperCase()))}function I(e){return e instanceof SVGAElement?new URL(e.href.baseVal,document.baseURI):new URL(e.href)}function T(e){const r=(0,t.w)(e);let n=!0;return{notify:function(){n=!0,r.update((e=>e))},set:function(e){n=!1,r.set(e)},subscribe:function(e){let t;return r.subscribe((r=>{(void 0===t||n&&r!==t)&&e(t=r)}))}}}function j(){const{set:e,subscribe:r}=(0,t.w)(!1);let n;return{subscribe:r,check:async function(){clearTimeout(n);const t=await fetch(`${p}/_app/version.json`,{headers:{pragma:"no-cache","cache-control":"no-cache"}});if(t.ok){const{version:r}=await t.json(),s="1655238968235"!==r;return s&&(e(!0),clearTimeout(n)),s}throw new Error(`Version check failed: ${t.status}`)}}}const C=window.fetch;const P=/^(\.\.\.)?(\w+)(?:=(\w+))?$/,q="sveltekit:scroll",D="sveltekit:index",M=(F=O,z={"":[[0,3],[1]],game:[[0,2],[1]],room:[[0,4],[1]],rooms:[[0,5],[1]]},K={},Object.entries(z).map((([e,[t,r,n]])=>{const{pattern:s,names:o,types:i}=function(e){const t=[],r=[];let n=!0;return{pattern:""===e?/^\/$/:new RegExp(`^${decodeURIComponent(e).split(/(?:@[a-zA-Z0-9_-]+)?(?:\/|$)/).map(((e,s,o)=>{const i=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(e);if(i)return t.push(i[1]),r.push(i[2]),"(?:/(.*))?";const a=s===o.length-1;return e&&"/"+e.split(/\[(.+?)\]/).map(((e,s)=>{if(s%2){const[,n,s,o]=P.exec(e);return t.push(s),r.push(o),n?"(.*?)":"([^/]+?)"}return a&&e.includes(".")&&(n=!1),e.normalize().replace(/%5[Bb]/g,"[").replace(/%5[Dd]/g,"]").replace(/#/g,"%23").replace(/\?/g,"%3F").replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})).join("")})).join("")}${n?"/?":""}$`),names:t,types:r}}(e);return{id:e,exec:e=>{const t=s.exec(e);if(t)return function(e,t,r,n){const s={};for(let o=0;o<t.length;o+=1){const i=t[o],a=r[o],c=e[o+1]||"";if(a){const e=n[a];if(!e)throw new Error(`Missing "${a}" param matcher`);if(!e(c))return}s[i]=c}return s}(t,o,i,K)},a:t.map((e=>F[e])),b:r.map((e=>F[e])),has_shadow:!!n}}))),V=O[0](),U=O[1](),H={};var F,z,K;let J={};try{J=JSON.parse(sessionStorage[q])}catch{}function Y(e){J[e]=S()}async function W({paths:r,target:n,session:s,route:o,spa:i,trailing_slash:h,hydrate:m}){const g=function({target:r,session:n,base:s,trailing_slash:o}){var i;const h=new Map,f=[],p={url:T({}),page:T({}),navigating:(0,t.w)(null),session:(0,t.w)(n),updated:j()},m={id:null,promise:null},g={before_navigate:[],after_navigate:[]};let b,v,y={branch:[],error:null,session_id:0,stuff:H,url:null},w=!1,$=!0,E=!1,k=1,_=null,G=!1;p.session.subscribe((async e=>{v=e,G&&(k+=1,Z(new URL(location.href),[],!0))})),G=!0;let R=!0,P=null==(i=history.state)?void 0:i[D];P||(P=Date.now(),history.replaceState(d(u({},history.state),{[D]:P}),"",location.href));const F=J[P];F&&(history.scrollRestoration="manual",scrollTo(F.x,F.y));let z,K,W=!1;async function X(e,{noscroll:t=!1,replaceState:r=!1,keepfocus:n=!1,state:s={}},o){const i=new URL(e,L(document));if(R)return ie({url:i,scroll:t?S():null,keepfocus:n,redirect_chain:o,details:{state:s,replaceState:r},accepted:()=>{},blocked:()=>{}});await ae(i)}async function Q(e){const t=oe(e);if(!t)throw new Error("Attempted to prefetch a URL that does not belong to this app");return m.promise=ne(t,!1),m.id=t.id,m.promise}async function Z(t,r,n,s,o){var i,a,c;const l=oe(t),h=K={};let u=l&&await ne(l,n);if(!u&&t.origin===location.origin&&t.pathname===location.pathname&&(u=await se({status:404,error:new Error(`Not found: ${t.pathname}`),url:t,routeId:null})),!u)return await ae(t),!1;if(K!==h)return!1;if(f.length=0,u.redirect){if(!(r.length>10||r.includes(t.pathname)))return R?X(new URL(u.redirect,t).href,{},[...r,t.pathname]):await ae(new URL(u.redirect,location.href)),!1;u=await se({status:500,error:new Error("Redirect loop"),url:t,routeId:null})}else(null==(a=null==(i=u.props)?void 0:i.page)?void 0:a.status)>=400&&await p.updated.check()&&await ae(t);if(E=!0,s&&s.details){const{details:e}=s,r=e.replaceState?0:1;e.state[D]=P+=r,history[e.replaceState?"replaceState":"pushState"](e.state,"",t)}if(w?(y=u.state,u.props.page&&(u.props.page.url=t),b.$set(u.props)):ee(u),s){const{scroll:r,keepfocus:n}=s;if(!n){const e=document.body,t=e.getAttribute("tabindex");null==(c=getSelection())||c.removeAllRanges(),e.tabIndex=-1,e.focus({preventScroll:!0}),null!==t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")}if(await(0,e.D)(),$){const e=t.hash&&document.getElementById(t.hash.slice(1));r?scrollTo(r.x,r.y):e?e.scrollIntoView():scrollTo(0,0)}}else await(0,e.D)();m.promise=null,m.id=null,$=!0,u.props.page&&(z=u.props.page);const d=u.state.branch[u.state.branch.length-1];R=!1!==(null==d?void 0:d.module.router),o&&o(),E=!1}function ee(e){y=e.state;const t=document.querySelector("style[data-sveltekit]");if(t&&t.remove(),z=e.props.page,b=new x({target:r,props:d(u({},e.props),{stores:p}),hydrate:!0}),R){const e={from:null,to:new URL(location.href)};g.after_navigate.forEach((t=>t(e)))}w=!0}async function te({url:e,params:t,stuff:r,branch:n,status:s,error:o,routeId:i}){var a,c;const l=n.filter(Boolean),u=l.find((e=>{var t;return null==(t=e.loaded)?void 0:t.redirect})),d={redirect:null==(a=null==u?void 0:u.loaded)?void 0:a.redirect,state:{url:e,params:t,branch:n,error:o,stuff:r,session_id:k},props:{components:l.map((e=>e.module.default))}};for(let e=0;e<l.length;e+=1){const t=l[e].loaded;d.props[`props_${e}`]=t?await t.props:null}if(!y.url||e.href!==y.url.href||y.error!==o||y.stuff!==r){d.props.page={error:o,params:t,routeId:i,status:s,stuff:r,url:e};const n=(e,t)=>{Object.defineProperty(d.props.page,e,{get:()=>{throw new Error(`$page.${e} has been replaced by $page.url.${t}`)}})};n("origin","origin"),n("path","pathname"),n("query","searchParams")}const f=l[l.length-1],m=null==(c=null==f?void 0:f.loaded)?void 0:c.cache;if(m){const t=e.pathname+e.search;let r=!1;const n=()=>{h.get(t)===d&&h.delete(t),o(),clearTimeout(s)},s=setTimeout(n,1e3*m.maxage),o=p.session.subscribe((()=>{r&&n()}));r=!0,h.set(t,d)}return d}async function re({status:e,error:t,module:r,url:n,params:s,stuff:o,props:i,routeId:h}){const d={module:r,uses:{params:new Set,url:!1,session:!1,stuff:!1,dependencies:new Set},loaded:null,stuff:o};function f(e){const{href:t}=new URL(e,n);d.uses.dependencies.add(t)}i&&d.uses.dependencies.add(n.href);const p={};for(const e in s)Object.defineProperty(p,e,{get:()=>(d.uses.params.add(e),s[e]),enumerable:!0});const m=v;if(r.load){const s={routeId:h,params:p,props:i||{},get url(){return d.uses.url=!0,new Proxy(n,{get:(e,t)=>{if("hash"===t)throw new Error("url.hash is inaccessible from load. Consider accessing hash from the page store within the script tag of your component.");return Reflect.get(e,t,e)}})},get session(){return d.uses.session=!0,m},get stuff(){return d.uses.stuff=!0,u({},o)},async fetch(e,t){let r;"string"==typeof e?r=e:(r=e.url,t=u({body:"GET"===e.method||"HEAD"===e.method?void 0:await e.blob(),cache:e.cache,credentials:e.credentials,headers:e.headers,integrity:e.integrity,keepalive:e.keepalive,method:e.method,mode:e.mode,redirect:e.redirect,referrer:e.referrer,referrerPolicy:e.referrerPolicy,signal:e.signal},t));const s=new URL(r,n).href;return f(s),w?C(s,t):function(e,t){let r=`script[sveltekit\\:data-type="data"][sveltekit\\:data-url=${JSON.stringify("string"==typeof e?e:e.url)}]`;t&&"string"==typeof t.body&&(r+=`[sveltekit\\:data-body="${function(e){let t=5381,r=e.length;if("string"==typeof e)for(;r;)t=33*t^e.charCodeAt(--r);else for(;r;)t=33*t^e[--r];return(t>>>0).toString(36)}(t.body)}"]`);const n=document.querySelector(r);if(n&&n.textContent){const e=JSON.parse(n.textContent),{body:t}=e,r=((e,t)=>{var r={};for(var n in e)c.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&a)for(var n of a(e))t.indexOf(n)<0&&l.call(e,n)&&(r[n]=e[n]);return r})(e,["body"]);return Promise.resolve(new Response(t,r))}return C(e,t)}(r,t)},status:null!=e?e:null,error:null!=t?t:null};let g;if(g=await r.load.call(null,s),!g)throw new Error("load function must return a value");d.loaded=N(g),d.loaded.stuff&&(d.stuff=d.loaded.stuff),d.loaded.dependencies&&d.loaded.dependencies.forEach(f)}else i&&(d.loaded=N({props:i}));return d}async function ne({id:e,url:t,params:r,route:n},s){var o,i,a;if(m.id===e&&m.promise)return m.promise;if(!s){const t=h.get(e);if(t)return t}const{a:c,b:l,has_shadow:d}=n,p=y.url&&{url:e!==y.url.pathname+y.url.search,params:Object.keys(r).filter((e=>y.params[e]!==r[e])),session:k!==y.session_id};let g=[],b=H,v=!1,w=200,$=null;c.forEach((e=>e().catch((()=>{}))));e:for(let e=0;e<c.length;e+=1){let s;try{if(!c[e])continue;const o=await c[e](),i=y.branch[e];if(!i||o!==i.module||p.url&&i.uses.url||p.params.some((e=>i.uses.params.has(e)))||p.session&&i.uses.session||Array.from(i.uses.dependencies).some((e=>f.some((t=>t(e)))))||v&&i.uses.stuff){let i={};const a=d&&e===c.length-1;if(a){const e=await C(`${t.pathname}${t.pathname.endsWith("/")?"":"/"}__data.json${t.search}`,{headers:{"x-sveltekit-load":"true"}});if(e.ok){const t=e.headers.get("x-sveltekit-location");if(t)return{redirect:t,props:{},state:y};i=204===e.status?{}:await e.json()}else w=e.status,$=new Error("Failed to load data")}if($||(s=await re({module:o,url:t,params:r,props:i,stuff:b,routeId:n.id})),s&&(a&&(s.uses.url=!0),s.loaded)){if(s.loaded.error&&(w=s.loaded.status,$=s.loaded.error),s.loaded.redirect)return{redirect:s.loaded.redirect,props:{},state:y};s.loaded.stuff&&(v=!0)}}else s=i}catch(e){w=500,$=A(e)}if($){for(;e--;)if(l[e]){let s,a,c=e;for(;!(a=g[c]);)c-=1;try{if(s=await re({status:w,error:$,module:await l[e](),url:t,params:r,stuff:a.stuff,routeId:n.id}),null!=(o=null==s?void 0:s.loaded)&&o.error)continue;null!=(i=null==s?void 0:s.loaded)&&i.stuff&&(b=u(u({},b),s.loaded.stuff)),g=g.slice(0,c+1).concat(s);break e}catch{continue}}return await se({status:w,error:$,url:t,routeId:n.id})}null!=(a=null==s?void 0:s.loaded)&&a.stuff&&(b=u(u({},b),s.loaded.stuff)),g.push(s)}return await te({url:t,params:r,stuff:b,branch:g,status:w,error:$,routeId:n.id})}async function se({status:e,error:t,url:r,routeId:n}){var s,o;const i={},a=await re({module:await V,url:r,params:i,stuff:{},routeId:n}),c=await re({status:e,error:t,module:await U,url:r,params:i,stuff:a&&a.loaded&&a.loaded.stuff||{},routeId:n});return await te({url:r,params:i,stuff:u(u({},null==(s=null==a?void 0:a.loaded)?void 0:s.stuff),null==(o=null==c?void 0:c.loaded)?void 0:o.stuff),branch:[a,c],status:e,error:t,routeId:n})}function oe(e){if(e.origin!==location.origin||!e.pathname.startsWith(s))return;const t=decodeURI(e.pathname.slice(s.length)||"/");for(const r of M){const n=r.exec(t);if(n)return{id:e.pathname+e.search,route:r,params:n,url:e}}}async function ie({url:e,scroll:t,keepfocus:r,redirect_chain:n,details:s,accepted:i,blocked:a}){const c=y.url;let l=!1;const h={from:c,to:e,cancel:()=>l=!0};if(g.before_navigate.forEach((e=>e(h))),l)return void a();const u=function(e,t){return"/"===e||"ignore"===t?e:"never"===t?e.endsWith("/")?e.slice(0,-1):e:"always"!==t||e.endsWith("/")?e:e+"/"}(e.pathname,o),d=new URL(e.origin+u+e.search+e.hash);Y(P),i(),w&&p.navigating.set({from:y.url,to:d}),await Z(d,n,!1,{scroll:t,keepfocus:r,details:s},(()=>{const e={from:c,to:d};g.after_navigate.forEach((t=>t(e))),p.navigating.set(null)}))}function ae(e){return location.href=e.href,new Promise((()=>{}))}return{after_navigate:t=>{(0,e.v)((()=>(g.after_navigate.push(t),()=>{const e=g.after_navigate.indexOf(t);g.after_navigate.splice(e,1)})))},before_navigate:t=>{(0,e.v)((()=>(g.before_navigate.push(t),()=>{const e=g.before_navigate.indexOf(t);g.before_navigate.splice(e,1)})))},disable_scroll_handling:()=>{(E||!w)&&($=!1)},goto:(e,t={})=>X(e,t,[]),invalidate:e=>{if("function"==typeof e)f.push(e);else{const{href:t}=new URL(e,location.href);f.push((e=>e===t))}return _||(_=Promise.resolve().then((async()=>{await Z(new URL(location.href),[],!0),_=null}))),_},prefetch:async e=>{const t=new URL(e,L(document));await Q(t)},prefetch_routes:async e=>{const t=(e?M.filter((t=>e.some((e=>t.exec(e))))):M).map((e=>Promise.all(e.a.map((e=>e())))));await Promise.all(t)},_start_router:()=>{history.scrollRestoration="manual",addEventListener("beforeunload",(e=>{let t=!1;const r={from:y.url,to:null,cancel:()=>t=!0};g.before_navigate.forEach((e=>e(r))),t?(e.preventDefault(),e.returnValue=""):history.scrollRestoration="auto"})),addEventListener("visibilitychange",(()=>{if("hidden"===document.visibilityState){Y(P);try{sessionStorage[q]=JSON.stringify(J)}catch{}}}));const e=e=>{const t=B(e);t&&t.href&&t.hasAttribute("sveltekit:prefetch")&&Q(I(t))};let t;addEventListener("touchstart",e),addEventListener("mousemove",(e=>{clearTimeout(t),t=setTimeout((()=>{var t;null==(t=e.target)||t.dispatchEvent(new CustomEvent("sveltekit:trigger_prefetch",{bubbles:!0}))}),20)})),addEventListener("sveltekit:trigger_prefetch",e),addEventListener("click",(e=>{if(!R||e.button||1!==e.which||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.defaultPrevented)return;const t=B(e);if(!t||!t.href)return;const r=t instanceof SVGAElement,n=I(t);if(!r&&"null"===n.origin)return;const s=(t.getAttribute("rel")||"").split(/\s+/);if(t.hasAttribute("download")||s.includes("external")||t.hasAttribute("sveltekit:reload")||(r?t.target.baseVal:t.target))return;const[o,i]=n.href.split("#");if(void 0!==i&&o===location.href.split("#")[0])return W=!0,Y(P),p.page.set(d(u({},z),{url:n})),void p.page.notify();ie({url:n,scroll:t.hasAttribute("sveltekit:noscroll")?S():null,keepfocus:!1,redirect_chain:[],details:{state:{},replaceState:n.href===location.href},accepted:()=>e.preventDefault(),blocked:()=>e.preventDefault()})})),addEventListener("popstate",(e=>{if(e.state&&R){if(e.state[D]===P)return;ie({url:new URL(location.href),scroll:J[e.state[D]],keepfocus:!1,redirect_chain:[],details:null,accepted:()=>{P=e.state[D]},blocked:()=>{const t=P-e.state[D];history.go(t)}})}})),addEventListener("hashchange",(()=>{W&&(W=!1,history.replaceState(d(u({},history.state),{[D]:++P}),"",location.href))}))},_hydrate:async({status:e,error:t,nodes:r,params:n,routeId:s})=>{const o=new URL(location.href),i=[];let a,c,l={};try{for(let a=0;a<r.length;a+=1){const h=a===r.length-1;let d;if(h){const e=document.querySelector('script[sveltekit\\:data-type="props"]');e&&(d=JSON.parse(e.textContent))}const f=await re({module:await O[r[a]](),url:o,params:n,stuff:l,status:h?e:void 0,error:h?t:void 0,props:d,routeId:s});if(d&&(f.uses.dependencies.add(o.href),f.uses.url=!0),i.push(f),f&&f.loaded)if(f.loaded.error){if(t)throw f.loaded.error;c={status:f.loaded.status,error:f.loaded.error,url:o,routeId:s}}else f.loaded.stuff&&(l=u(u({},l),f.loaded.stuff))}a=c?await se(c):await te({url:o,params:n,stuff:l,branch:i,status:e,error:t,routeId:s})}catch(e){if(t)throw e;a=await se({status:500,error:A(e),url:o,routeId:s})}a.redirect&&await ae(new URL(a.redirect,location.href)),ee(a)}}}({target:n,session:s,base:r.base,trailing_slash:h});(0,t.i)({client:g}),function(e){f=e.base,p=e.assets||f}(r),m&&await g._hydrate(m),o&&(i&&g.goto(location.href,{replaceState:!0}),g._start_router()),dispatchEvent(new CustomEvent("sveltekit:start"))}})();var s=(n=n.start);export{s as start};
